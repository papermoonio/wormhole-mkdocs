<!doctype html><html lang="en" class="no-js"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Learn how to fetch, validate, and replace outdated signatures in Wormhole VAAs using Wormholescan and the Wormhole SDK to ensure seamless processing."><link rel="canonical" href="https://wormhole.com/docs/products/messaging/tutorials/replace-signatures/"><link rel="prev" href="../cross-chain-token-contracts/"><link rel="next" href="../../reference/core-contract-evm/"><link rel="icon" href="../../../../assets/images/favicon.webp"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Replace Outdated Signatures in VAAs | Wormhole Docs</title><link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css"><link rel="stylesheet" href="../../../../assets/stylesheets/palette.ab4e12ef.min.css"><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.013%201.427a1.75%201.75%200%200%201%202.474%200l1.086%201.086a1.75%201.75%200%200%201%200%202.474l-8.61%208.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75%200%200%201-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176%204.823L9.75%204.81l-6.286%206.287a.25.25%200%200%200-.064.108l-.558%201.953%201.953-.558a.25.25%200%200%200%20.108-.064Zm1.238-3.763a.25.25%200%200%200-.354%200L10.811%203.75l1.439%201.44%201.263-1.263a.25.25%200%200%200%200-.354Z%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M6.457%201.047c.659-1.234%202.427-1.234%203.086%200l6.082%2011.378A1.75%201.75%200%200%201%2014.082%2015H1.918a1.75%201.75%200%200%201-1.543-2.575Zm1.763.707a.25.25%200%200%200-.44%200L1.698%2013.132a.25.25%200%200%200%20.22.368h12.164a.25.25%200%200%200%20.22-.368Zm.53%203.996v2.5a.75.75%200%200%201-1.5%200v-2.5a.75.75%200%200%201%201.5%200M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');}</style><script>
    document.documentElement.classList.add('js-loading');

    (() => {
      const BREAKPOINT_EM = 76.25;
      const BREAKPOINT_PX = BREAKPOINT_EM * 16;

      function isLargeScreen() {
        return window.innerWidth >= BREAKPOINT_PX;
      }

      function getActiveSectionId() {
        const activeLink = document.querySelector('.md-nav__link--active');
        const section = activeLink?.closest('.nav__item--section');
        return section?.id || null;
      }

      function applySectionState(section, isExpanded) {
        const toggle = section.querySelector(':scope > .md-nav__toggle');
        const nav = section.querySelector(':scope > nav.md-nav');
        if (!toggle || !nav) return;

        toggle.checked = isExpanded;
        nav.setAttribute('aria-expanded', isExpanded);
        section.classList.toggle('expanded', isExpanded);
      }

      const sections = [];
      const toggles = new Map();

      function setupSection(section) {
        const id = section.id;
        if (!id) return;

        const toggle = section.querySelector(':scope > .md-nav__toggle');
        const nav = section.querySelector(':scope > nav.md-nav');
        if (!toggle || !nav) return;

        // Save toggle ref for later updates
        toggles.set(section, { toggle, nav });

        // Attach listener once
        if (!toggle.dataset.listenerAttached) {
          toggle.addEventListener('change', () => {
            const checked = toggle.checked;
            if (isLargeScreen()) {
              localStorage.setItem(id, checked);
            }
            applySectionState(section, checked);
          });
          toggle.dataset.listenerAttached = 'true';
        }

        sections.push(section);
      }

      function applyInitialState() {
        const large = isLargeScreen();
        const activeId = getActiveSectionId();

        sections.forEach((section) => {
          const id = section.id;
          let isExpanded = false;

          if (large) {
            const saved = localStorage.getItem(id);
            isExpanded = saved === null ? true : saved === 'true';

            // Always expand the active section, even if localStorage says false
            if (id === activeId) {
              isExpanded = true;
              localStorage.setItem(id, 'true');
            }
          } else {
            // On small screens, only expand the active section
            isExpanded = id === activeId;
          }

          applySectionState(section, isExpanded);
        });
      }

      getTopNavigationState = () => {
        const path = window.location.pathname;
        // If on a reference page, highlight the reference top level nav item
        if (path.includes('products/reference')) {
          const tabs = document.querySelectorAll('.md-tabs__item');

          tabs.forEach(tab => {
            // Remove the active class from the active tab
            if (tab.classList.contains('md-tabs__item--active')) {
              tab.classList.remove('md-tabs__item--active');
            }

            // Add the active class to the tab that contains 'Reference'
            if (tab.children[0].innerText.includes('Reference')) {
              tab.classList.add('md-tabs__item--active');
            }
          });
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        // Handle left navigation state
        document.querySelectorAll('.nav__item--section').forEach(setupSection);
        applyInitialState();

        // Handle top navigation state
        getTopNavigationState();

        document.documentElement.classList.remove('js-loading');
      });

      window.addEventListener('resize', () => {
        applyInitialState();
      });
    })();
  </script><link rel="preload" href="https://cdn.jsdelivr.net/npm/@cookbookdev/docsbot/dist/standalone/index.cjs.js" as="script"><script>
    function initAskCookbook() {
      // It's a public API key, so it's safe to expose it here
      const PUBLIC_API_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NmQ3MzdmOTE4MjcyOTljZGJlNTQ5ZDEiLCJpYXQiOjE3MjUzODA2MDEsImV4cCI6MjA0MDk1NjYwMX0.Qp6dEbLWFzju37NsD3VD3kNFGsHo8qJohXUSl5-lSiQ";

      let cookbookContainer = document.getElementById("__cookbook");
      if (!cookbookContainer) {
        cookbookContainer = document.createElement("div");
        cookbookContainer.id = "__cookbook";
        cookbookContainer.dataset.apiKey = PUBLIC_API_KEY;
        document.body.appendChild(cookbookContainer);
      }

      let cookbookScript = document.getElementById("__cookbook-script");
      if (!cookbookScript) {
        cookbookScript = document.createElement("script");
        cookbookScript.id = "__cookbook-script";
        cookbookScript.src = "https://cdn.jsdelivr.net/npm/@cookbookdev/docsbot/dist/standalone/index.cjs.js";
        cookbookScript.async = true;
        document.head.appendChild(cookbookScript);
      }
    }

    // Check if the document is already loaded and if so, initialize the script, otherwise wait for the load event
    if (document.readyState === "complete") {
      initAskCookbook();
    } else {
      window.addEventListener("load", initAskCookbook);
    }
  </script><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="../../../../assets/stylesheets/terminal.49d4f8.min.css"><link rel="stylesheet" href="../../../../assets/stylesheets/spantable-neoteroi.638b5a.min.css"><link rel="stylesheet" href="../../../../assets/stylesheets/timeline-neoteroi.70ac4b.min.css"><link rel="stylesheet" href="../../../../assets/stylesheets/wormhole.97a469.min.css"><link rel="stylesheet" href="../../../../assets/stylesheets/copy-to-llm.641c23.min.css"><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-SGJJFZS9BB"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-SGJJFZS9BB",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-SGJJFZS9BB",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script> <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../../assets/javascripts/glightbox.min.js"></script></head> <body dir="ltr" data-md-color-scheme="custom-dark" data-md-color-primary="indigo" data-md-color-accent="indigo"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#replace-outdated-signatures-in-vaas" class="md-skip"> Skip to content </a> </div> <div data-md-component="announce"> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="Header"> <a href="../../../.." title="Wormhole Docs" class="md-header__button md-logo" aria-label="Wormhole Docs" data-md-component="logo"> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Logo --> <img src="../../../../assets/images/wormhole-light.webp#only-light" alt="logo"> <img src="../../../../assets/images/wormhole-dark.webp#only-dark" alt="logo"> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> Wormhole Docs </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Replace Outdated Signatures in VAAs </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="custom-dark" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_0"> <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="custom-light" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_1"> <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class="md-search__options" aria-label="Search"> <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <!-- Anchor for cookbook button --> <div class="for-cookbook"></div> </nav> <div class="tabs-wrapper"> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Navigation tabs --> <nav class="md-tabs" aria-label="Tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item md-tabs__item--active"> <a href="../../../overview/" class="md-tabs__link"> Products </a> </li> <li class="md-tabs__item"> <a href="../../../../protocol/introduction/" class="md-tabs__link"> Protocol </a> </li> <li class="md-tabs__item"> <a href="../../../../tools/typescript-sdk/get-started/" class="md-tabs__link"> Developer Tools </a> </li> <li class="md-tabs__item"> <a href="/docs/products/reference/chain-ids/" class="md-tabs__link"> Reference </a> </li> <li class="md-tabs__item"> <a href="../../../../ai-resources/ai-resources/" class="md-tabs__link"> AI Resources </a> </li> </ul> </div> </nav> </div> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../../../.." title="Wormhole Docs" class="md-nav__button md-logo" aria-label="Wormhole Docs" data-md-component="logo"> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Logo --> <img src="../../../../assets/images/wormhole-light.webp#only-light" alt="logo"> <img src="../../../../assets/images/wormhole-dark.webp#only-dark" alt="logo"> </a> Wormhole Docs </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested" id> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Products </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_1"> <span class="md-nav__icon md-icon"></span> Products </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../overview/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Product Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="products_2"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Token Transfers </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2"> <span class="md-nav__icon md-icon"></span> Token Transfers </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/overview/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="token_transfers_2"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_2"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_2" id="__nav_1_2_2_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Native Token Transfers </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_2_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_2"> <span class="md-nav__icon md-icon"></span> Native Token Transfers </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/overview/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/get-started/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Get Started </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="native_token_transfers_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_2_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_2_3" id="__nav_1_2_2_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Deployment Guides </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_2_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_2_3"> <span class="md-nav__icon md-icon"></span> Deployment Guides </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/guides/deploy-to-evm/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Deploy to EVM Chains </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/guides/deploy-to-solana/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Deploy to SVM Chains </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/guides/deploy-to-sui/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Deploy to Sui </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/guides/troubleshoot/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Troubleshoot Your Deployment </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/guides/post-deployment/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Post Deployment </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/guides/transfer-ownership/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Transfer Ownership </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="native_token_transfers_4"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_2_4"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_2_4" id="__nav_1_2_2_4_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Configuration </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_2_2_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_2_4"> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/configuration/access-control/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Access Control </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/configuration/rate-limiting/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Rate Limits </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="native_token_transfers_5"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_2_5"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_2_5" id="__nav_1_2_2_5_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Concepts </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_2_2_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_2_5"> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/concepts/architecture/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Architecture </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/concepts/transfer-flow/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Flow of a Transfer </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/concepts/security/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Security </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/faqs/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> FAQs </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="native_token_transfers_7"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_2_7"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_2_7" id="__nav_1_2_2_7_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Reference </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_2_2_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_2_7"> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/reference/supported-networks/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Supported Networks </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/reference/cli-commands/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> NTT CLI Commands </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="reference_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_2_7_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_2_7_3" id="__nav_1_2_2_7_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> NTT Manager </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_2_2_7_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_2_7_3"> <span class="md-nav__icon md-icon"></span> NTT Manager </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/reference/manager/evm/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> EVM Chains </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/reference/manager/solana/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Solana </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="reference_4"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_2_7_4"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_2_7_4" id="__nav_1_2_2_7_4_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Transceivers </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_2_2_7_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_2_7_4"> <span class="md-nav__icon md-icon"></span> Transceivers </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/reference/transceivers/evm/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Native Token Transfers Transceivers Contracts (EVM) </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/native-token-transfers/reference/transceivers/solana/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Native Token Transfers Transceiver Program (Solana) </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="token_transfers_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_3" id="__nav_1_2_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Wrapped Token Transfers </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_2_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_3"> <span class="md-nav__icon md-icon"></span> Wrapped Token Transfers </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/overview/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/get-started/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Get Started </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="wrapped_token_transfers_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_3_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_3_3" id="__nav_1_2_3_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Guides </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_2_3_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_3_3"> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/guides/transfer-wrapped-assets/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Transfer Wrapped Assets </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/guides/wtt-contracts/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Transfer Assets with Solidity </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/guides/attest-tokens/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Attest Tokens </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/guides/fetch-signed-vaa/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Fetch a Signed VAA </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="wrapped_token_transfers_4"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_3_4"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_3_4" id="__nav_1_2_3_4_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Tutorials </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_2_3_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_3_4"> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/tutorials/transfer-workflow/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Complete Token Transfer Workflow </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/tutorials/multichain-token/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Create Multichain Tokens </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="wrapped_token_transfers_5"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_3_5"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_3_5" id="__nav_1_2_3_5_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Concepts </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_2_3_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_3_5"> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/concepts/transfer-flow/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Flow of a Transfer </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/concepts/payload-structure/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Payload Structure </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/faqs/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> FAQs </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="wrapped_token_transfers_7"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2_3_7"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_2_3_7" id="__nav_1_2_3_7_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Reference </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_2_3_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_2_3_7"> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../token-transfers/wrapped-token-transfers/reference/supported-networks/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Supported Networks </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="https://portalbridge.com/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Portal Bridge </span> <!-- Navigation link status --> <span class="external-link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 16 16"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2m6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.75.75 0 0 1-1.042-.018.75.75 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1"/></svg></span> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="products_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Connect </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_3"> <span class="md-nav__icon md-icon"></span> Connect </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/overview/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/get-started/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Get Started </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="connect_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_3_3" id="__nav_1_3_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Configuration </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_3_3"> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/configuration/data/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Data </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/configuration/theme/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Theme </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="connect_4"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_4"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_3_4" id="__nav_1_3_4_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Guides </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_3_4"> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/guides/hosted-version/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Integrate via CDN </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/guides/upgrade/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Version Migration </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="connect_5"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_5"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_3_5" id="__nav_1_3_5_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Tutorials </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_3_5"> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/tutorials/react-dapp/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Create a React Bridging App </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="connect_6"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_6"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_3_6" id="__nav_1_3_6_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Concepts </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_3_6"> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/concepts/routes/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Routes </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/faqs/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> FAQs </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="connect_8"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3_8"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_3_8" id="__nav_1_3_8_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Reference </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_3_8_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_3_8"> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/reference/supported-networks/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Supported Networks </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../connect/reference/support-matrix/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Supported Features </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="products_4"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Settlement </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_4"> <span class="md-nav__icon md-icon"></span> Settlement </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../settlement/overview/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../settlement/get-started/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Get Started </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="settlement_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_4_3" id="__nav_1_4_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Concepts </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_4_3"> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../settlement/concepts/architecture/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Architecture </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../settlement/faqs/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> FAQs </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="settlement_5"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_5"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_4_5" id="__nav_1_4_5_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Reference </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_4_5"> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../settlement/reference/supported-networks/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Supported Networks </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="products_5"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> CCTP Bridge </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_5"> <span class="md-nav__icon md-icon"></span> CCTP Bridge </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../cctp-bridge/overview/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../cctp-bridge/get-started/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Get Started </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="cctp_bridge_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_5_3" id="__nav_1_5_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Guides </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_5_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_5_3"> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../cctp-bridge/guides/cctp-contracts/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Interact with Contracts </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="cctp_bridge_4"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_4"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_5_4" id="__nav_1_5_4_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Tutorials </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_5_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_5_4"> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../cctp-bridge/tutorials/complete-usdc-transfer/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Complete USDC Transfer Flow </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="cctp_bridge_5"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_5"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_5_5" id="__nav_1_5_5_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Reference </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_5_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_5_5"> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../cctp-bridge/reference/supported-networks/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Supported Networks </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="products_6"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> MultiGov </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_6"> <span class="md-nav__icon md-icon"></span> MultiGov </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/overview/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/get-started/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Get Started </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="multigov_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_6_3" id="__nav_1_6_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Guides </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_6_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_6_3"> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/guides/deploy-to-evm/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Deploy to EVM Chains </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/guides/deploy-to-solana/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Deploy to Solana </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/guides/upgrade-evm/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Upgrade on EVM Chains </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/guides/upgrade-solana/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Upgrade on Solana </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="multigov_4"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_4"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_6_4" id="__nav_1_6_4_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Tutorials </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_6_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_6_4"> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/tutorials/treasury-proposal/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Create a Treasury Management Proposal </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="multigov_5"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_5"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_6_5" id="__nav_1_6_5_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Concepts </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_6_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_6_5"> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/concepts/architecture/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Architecture </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/concepts/proposal-flow/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Flow of a Proposal </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/faqs/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> FAQs </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="multigov_7"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_7"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_6_7" id="__nav_1_6_7_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Reference </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_6_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_6_7"> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../multigov/reference/supported-networks/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Supported Networks </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="products_7"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Queries </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_7"> <span class="md-nav__icon md-icon"></span> Queries </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../queries/overview/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../queries/get-started/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Get Started </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="queries_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_7_3" id="__nav_1_7_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Guides </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_7_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_7_3"> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../queries/guides/use-queries/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Use Queries </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="queries_4"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7_4"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_7_4" id="__nav_1_7_4_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Tutorials </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_7_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_7_4"> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../queries/tutorials/live-crypto-prices/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Live Crypto Prices </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../queries/faqs/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> FAQs </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="queries_6"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7_6"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_7_6" id="__nav_1_7_6_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Reference </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_7_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_7_6"> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../queries/reference/supported-networks/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Supported Networks </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../queries/reference/supported-methods/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Supported Methods </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--active nav__item--section md-nav__item--nested" id="products_8"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" checked> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Messaging </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_1_8"> <span class="md-nav__icon md-icon"></span> Messaging </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../overview/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../get-started/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Get Started </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="messaging_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_8_3" id="__nav_1_8_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Guides </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_8_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_8_3"> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="guides_1"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8_3_1"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_8_3_1" id="__nav_1_8_3_1_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Solana Shims </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_8_3_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_8_3_1"> <span class="md-nav__icon md-icon"></span> Solana Shims </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../guides/solana-shims/sol-emission/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Solana Message Emission via Shim </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../guides/solana-shims/sol-verification/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Solana VAA Verification via Shim </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../guides/wormhole-relayers/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Interact with Legacy Wormhole Relayers </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../guides/core-contracts/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Interact with Core Contracts </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../guides/wormholescan-api/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Query NTT Data and Transfers </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="messaging_4"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8_4"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_8_4" id="__nav_1_8_4_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Concepts </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_8_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_8_4"> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../concepts/solana-shim/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Solana Shims </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--active md-nav__item--nested" id="messaging_5"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8_5" checked> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_8_5" id="__nav_1_8_5_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Tutorials </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_8_5_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_1_8_5"> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../cross-chain-contracts/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Create Messaging Contracts </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../cross-chain-token-contracts/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Create Token Transfer Contracts </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item md-nav__item--active"> <!-- State toggle --> <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"> <!-- Hack: see partials/toc.html for more information --> <!-- Navigation link to table of contents --> <label class="md-nav__link md-nav__link--active" for="__toc"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Replace Outdated Signatures in VAAs </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <a href="./" class="md-nav__link md-nav__link--active"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Replace Outdated Signatures in VAAs </span> <!-- Navigation link status --> </a> <!-- Table of contents --> <nav class="md-nav md-nav--secondary" aria-label="Sections"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Sections </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#prerequisites" class="md-nav__link"> <span class="md-ellipsis"> Prerequisites </span> </a> </li> <li class="md-nav__item"> <a href="#project-setup" class="md-nav__link"> <span class="md-ellipsis"> Project Setup </span> </a> </li> <li class="md-nav__item"> <a href="#create-vaa-handling-functions" class="md-nav__link"> <span class="md-ellipsis"> Create VAA Handling Functions </span> </a> <nav class="md-nav" aria-label="Create VAA Handling Functions"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#fetch-a-vaa-id-from-a-transaction" class="md-nav__link"> <span class="md-ellipsis"> Fetch a VAA ID from a Transaction </span> </a> </li> <li class="md-nav__item"> <a href="#fetch-the-full-vaa" class="md-nav__link"> <span class="md-ellipsis"> Fetch the Full VAA </span> </a> </li> <li class="md-nav__item"> <a href="#validate-vaa-signatures" class="md-nav__link"> <span class="md-ellipsis"> Validate VAA Signatures </span> </a> </li> <li class="md-nav__item"> <a href="#fetch-observations-vaa-signatures" class="md-nav__link"> <span class="md-ellipsis"> Fetch Observations (VAA Signatures) </span> </a> </li> <li class="md-nav__item"> <a href="#fetch-the-latest-guardian-set" class="md-nav__link"> <span class="md-ellipsis"> Fetch the Latest Guardian Set </span> </a> </li> <li class="md-nav__item"> <a href="#replace-outdated-signatures" class="md-nav__link"> <span class="md-ellipsis"> Replace Outdated Signatures </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#create-script-to-replace-outdated-vaa-signatures" class="md-nav__link"> <span class="md-ellipsis"> Create Script to Replace Outdated VAA Signatures </span> </a> </li> <li class="md-nav__item"> <a href="#resources" class="md-nav__link"> <span class="md-ellipsis"> Resources </span> </a> </li> <li class="md-nav__item"> <a href="#conclusion" class="md-nav__link"> <span class="md-ellipsis"> Conclusion </span> </a> </li> </ul> </nav> </li> <!-- Navigation item --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="messaging_6"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8_6"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_8_6" id="__nav_1_8_6_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Reference </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_8_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_8_6"> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../reference/core-contract-evm/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> EVM Core Contract </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../reference/core-contract-solana/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Solana Core Contract </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../reference/executor-addresses/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Executor Addresses </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../reference/relayer-contract/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Legacy Relayer Contract </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="products_9"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Reference </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_1_9"> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../reference/chain-ids/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Chain IDs </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../reference/contract-addresses/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Contract Addresses </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../reference/consistency-levels/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Wormhole Finality </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../reference/wormhole-formatted-addresses/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Wormhole-Formatted Addresses </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../reference/executor-addresses/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Executor Addresses </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../reference/supported-networks/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Supported Networks </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../reference/testnet-faucets/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Testnet Faucets </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../reference/glossary/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Glossary </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="https://arena.wormhole.com/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Wormhole Dev Arena </span> <!-- Navigation link status --> <span class="external-link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 16 16"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2m6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.75.75 0 0 1-1.042-.018.75.75 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1"/></svg></span> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Protocol </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> Protocol </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/introduction/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Introduction to Wormhole </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/architecture/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Architecture Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/ecosystem/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Ecosystem Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/security/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Security Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="protocol_5"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Infrastructure Components </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5"> <span class="md-nav__icon md-icon"></span> Infrastructure Components </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/infrastructure/core-contracts/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Core Contracts </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/infrastructure/vaas/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> VAAs </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/infrastructure/guardians/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Guardians </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/infrastructure/spy/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Spy </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="infrastructure_components_5"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_5"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_2_5_5" id="__nav_2_5_5_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Relayers </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_5_5"> <span class="md-nav__icon md-icon"></span> Relayers </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/infrastructure/relayers/relayer/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Overview </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/infrastructure/relayers/executor-framework/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Executor Framework </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/infrastructure/relayers/executor-vs-sr/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Standard Relayer to Executor Migration </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="protocol_6"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Infrastructure Guides </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2_6"> <span class="md-nav__icon md-icon"></span> Infrastructure Guides </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/infrastructure-guides/ntt-executor/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Integrate NTT with Executor </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/infrastructure-guides/cctp-executor/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Integrate CCTP with Executor </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../protocol/infrastructure-guides/run-spy/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Run a Spy </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Developer Tools </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> Developer Tools </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="developer_tools_1"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> TypeScript SDK </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_1"> <span class="md-nav__icon md-icon"></span> TypeScript SDK </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../tools/typescript-sdk/get-started/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Get Started </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../tools/typescript-sdk/sdk-reference/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> SDK Reference </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id="typescript_sdk_3"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_3"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Guides </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_1_3"> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../tools/typescript-sdk/guides/sdk-layout/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Data Layouts </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../tools/typescript-sdk/guides/protocols-payloads/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Building Protocols and Payloads </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../tools/typescript-sdk/guides/vaas-protocols/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> VAAs and Protocol Messages </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item nav__item--section md-nav__item--nested" id="developer_tools_2"> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0"> <span class="nav__icon md-icon plus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 19V5H5v14zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-8 4h2v4h4v2h-4v4h-2v-4H7v-2h4z"/></svg></span> <span class="nav__icon md-icon minus"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13H7v-2h10m2-8H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"/></svg></span> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Wormhole CLI </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon mobile"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3_2"> <span class="md-nav__icon md-icon"></span> Wormhole CLI </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../tools/cli/get-started/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Get Started </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="https://wormholescan.io/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Wormholescan Explorer </span> <!-- Navigation link status --> <span class="external-link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 16 16"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2m6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.75.75 0 0 1-1.042-.018.75.75 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1"/></svg></span> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="https://wormholescan.io/#/developers/api-doc" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Wormholescan API </span> <!-- Navigation link status --> <span class="external-link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 16 16"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2m6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.75.75 0 0 1-1.042-.018.75.75 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1"/></svg></span> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="/docs/products/reference/chain-ids/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Reference </span> <!-- Navigation link status --> </a> </li> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <!-- Determine all nested items that are index pages --> <!-- Navigation tabs --> <!-- Render 1st level active item as section --> <!-- Navigation tabs + sections --> <!-- Navigation sections --> <!-- Navigation pruning --> <!-- Nested navigation item --> <li class="md-nav__item md-nav__item--nested" id> <!-- Determine checked and indeterminate state --> <!-- Active checkbox expands items contained within nested section --> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5"> <!-- Toggle to expand nested items --> <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> AI Resources </span> <!-- Navigation link status --> <span class="md-nav__icon md-icon"></span> </label> <!-- Toggle to expand nested items with link to index page --> <!-- Nested navigation --> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> AI Resources </label> <ul class="md-nav__list" data-md-scrollfix> <!-- Nested navigation item --> <!-- Determine classes --> <!-- Determine active page for paginated views --> <!-- Navigation item with nested items --> <li class="md-nav__item"> <a href="../../../../ai-resources/ai-resources/" class="md-nav__link"> <!-- Navigation link icon --> <!-- Navigation link title --> <span class="md-ellipsis"> Download LLM Files </span> <!-- Navigation link status --> </a> </li> </ul> </nav> <!-- Pruned navigation item --> </li> <!-- Currently active page --> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="page-actions"> <label class="md-nav__title" for="__page_actions"> Page Actions </label> <div class="actions-container"><div class="edit-section"> <a href="https://github.com/wormhole-foundation/wormhole-docs/edit/dev/products/messaging/tutorials/replace-signatures.md" title="Edit this page" class="md-content__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg> Edit this page </a> </div><div class="feedback-section"> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine feedback configuration --> <!-- Determine whether to show feedback --> <!-- Was this page helpful? --> <form class="md-feedback" name="feedback" hidden> <fieldset> <legend class="md-feedback__title"> Was this helpful? </legend> <div class="md-feedback__inner"> <!-- Feedback ratings --> <div class="md-feedback__list"> <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg> </button> <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg> </button> </div> <!-- Feedback rating notes (shown after submission) --> <div class="md-feedback__note"> <div data-md-value="1" hidden> <!-- Determine title --> <!-- Replace {url} and {title} placeholders in note --> Thanks for your feedback! </div> <div data-md-value="0" hidden> <!-- Determine title --> <!-- Replace {url} and {title} placeholders in note --> Thanks for your feedback! Help us improve this page by submitting <a href="https://docs.google.com/forms/d/e/1FAIpQLSdRjp_CJ2jEC0gPvK242zRzJoN_x9-Nlt_KXkCy7QPYiD4OlA/viewform?usp=pp_url&entry.2090824420=[Feedback]+Replace%20Outdated%20Signatures%20in%20VAAs+-+/products/messaging/tutorials/replace-signatures/" target="_blank" rel="noopener">additional feedback</a>. </div> </div> </div> </fieldset> </form> </div> </div> </div> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--secondary" aria-label="Sections"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Sections </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#prerequisites" class="md-nav__link"> <span class="md-ellipsis"> Prerequisites </span> </a> </li> <li class="md-nav__item"> <a href="#project-setup" class="md-nav__link"> <span class="md-ellipsis"> Project Setup </span> </a> </li> <li class="md-nav__item"> <a href="#create-vaa-handling-functions" class="md-nav__link"> <span class="md-ellipsis"> Create VAA Handling Functions </span> </a> <nav class="md-nav" aria-label="Create VAA Handling Functions"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#fetch-a-vaa-id-from-a-transaction" class="md-nav__link"> <span class="md-ellipsis"> Fetch a VAA ID from a Transaction </span> </a> </li> <li class="md-nav__item"> <a href="#fetch-the-full-vaa" class="md-nav__link"> <span class="md-ellipsis"> Fetch the Full VAA </span> </a> </li> <li class="md-nav__item"> <a href="#validate-vaa-signatures" class="md-nav__link"> <span class="md-ellipsis"> Validate VAA Signatures </span> </a> </li> <li class="md-nav__item"> <a href="#fetch-observations-vaa-signatures" class="md-nav__link"> <span class="md-ellipsis"> Fetch Observations (VAA Signatures) </span> </a> </li> <li class="md-nav__item"> <a href="#fetch-the-latest-guardian-set" class="md-nav__link"> <span class="md-ellipsis"> Fetch the Latest Guardian Set </span> </a> </li> <li class="md-nav__item"> <a href="#replace-outdated-signatures" class="md-nav__link"> <span class="md-ellipsis"> Replace Outdated Signatures </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="#create-script-to-replace-outdated-vaa-signatures" class="md-nav__link"> <span class="md-ellipsis"> Create Script to Replace Outdated VAA Signatures </span> </a> </li> <li class="md-nav__item"> <a href="#resources" class="md-nav__link"> <span class="md-ellipsis"> Resources </span> </a> </li> <li class="md-nav__item"> <a href="#conclusion" class="md-nav__link"> <span class="md-ellipsis"> Conclusion </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Tags --> <!--
  Hack: check whether the content contains a h1 headline. If it doesn't, the
  page title (or respectively site name) is used as the main headline.
--> <h1 id="replace-outdated-signatures-in-vaas">Replace Outdated Signatures in VAAs<a class="headerlink" href="#replace-outdated-signatures-in-vaas" title="Permanent link"></a></h1> <p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></span> <a href="https://github.com/wormhole-foundation/demo-vaa-signature-replacement" target="_blank">Source code on GitHub</a></p> <p>Cross-chain transactions in Wormhole rely on <a href="/docs/protocol/infrastructure/vaas/" target="_blank">Verifiable Action Approvals (VAAs)</a>, which contain signatures from a trusted set of validators called <a href="/docs/protocol/infrastructure/guardians/" target="_blank">Guardians</a>. These signatures prove that the network approved an action, such as a token transfer.</p> <p>However, the set of Guardians changes over time. If a user generates a transaction and waits too long before redeeming it, the Guardian set may have already changed. This means the VAA will contain outdated signatures from Guardians, who are no longer part of the network, causing the transaction to fail.</p> <p>Instead of discarding these VAAs, we can fetch updated signatures and replace the outdated ones to ensure smooth processing.</p> <p>In this tutorial, you'll build a script from scratch to:</p> <ul> <li>Fetch a VAA from <a href="https://wormholescan.io/#/developers/api-doc" target="_blank">Wormholescan</a>.</li> <li>Validate its signatures against the latest Guardian set.</li> <li>Replace outdated signatures using the <a href="https://github.com/wormhole-foundation/wormhole-sdk-ts" target="_blank">Wormhole SDK</a>.</li> <li>Output a valid VAA ready for submission.</li> </ul> <p>By the end, you'll have a script that ensures VAAs remain valid and processable, avoiding transaction failures.</p> <h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link"></a></h2> <p>Before you begin, ensure you have the following:</p> <ul> <li><a href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm" target="_blank">Node.js and npm</a> installed on your machine.</li> <li><a href="https://www.typescriptlang.org/download/" target="_blank">TypeScript</a> installed globally.</li> </ul> <h2 id="project-setup">Project Setup<a class="headerlink" href="#project-setup" title="Permanent link"></a></h2> <p>In this section, you will create the directory, initialize a Node.js project, install dependencies, and configure TypeScript.</p> <ol> <li> <p><strong>Create the project</strong>: Set up the directory and navigate into it.</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>mkdir<span class="w"> </span>wormhole-scan-api-demo
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">cd</span><span class="w"> </span>wormhole-scan-api-demo
</span></code></pre></div> </li> <li> <p><strong>Initialize a Node.js project</strong>: Generate a <code>package.json</code> file.</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>npm<span class="w"> </span>init<span class="w"> </span>-y
</span></code></pre></div> </li> <li> <p><strong>Set up TypeScript</strong>: Create a <code>tsconfig.json</code> file.</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>touch<span class="w"> </span>tsconfig.json
</span></code></pre></div> <p>Then, add the following configuration:</p> <div class="language-json highlight"><span class="filename">tsconfig.json</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="nt">&quot;compilerOptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">        </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;es2016&quot;</span><span class="p">,</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">        </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;commonjs&quot;</span><span class="p">,</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">        </span><span class="nt">&quot;esModuleInterop&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">        </span><span class="nt">&quot;forceConsistentCasingInFileNames&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">        </span><span class="nt">&quot;strict&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">        </span><span class="nt">&quot;skipLibCheck&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p><strong>Install dependencies</strong>: Add the required packages. This tutorial uses the SDK version <code>4.9.1</code>.</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>npm<span class="w"> </span>install<span class="w"> </span>@wormhole-foundation/sdk@4.9.1<span class="w"> </span>axios<span class="w"> </span>web3<span class="w"> </span>tsx<span class="w"> </span>@types/node
</span></code></pre></div> <ul> <li><strong><code>@wormhole-foundation/sdk</code></strong>: Handles VAAs and cross-chain interactions. </li> <li><strong><code>axios</code></strong>: Makes HTTP requests to the Wormholescan API. </li> <li><strong><code>web3</code></strong>: Interacts with Ethereum transactions and contracts. </li> <li><strong><code>tsx</code></strong>: Executes TypeScript files without compilation. </li> <li><strong><code>@types/node</code></strong>: Provides Node.js type definitions. </li> </ul> </li> <li> <p><strong>Create the project structure</strong>: Set up the required directories and files.</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>src/config<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>touch<span class="w"> </span>src/config/constants.ts<span class="w"> </span>src/config/layouts.ts
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>src/helpers<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>touch<span class="w"> </span>src/helpers/vaaHelper.ts
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>src/scripts<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>touch<span class="w"> </span>scripts/replaceSignatures.ts
</span></code></pre></div> <ul> <li><strong><code>src/config/*</code></strong>: Stores public configuration variables and layouts for serializing and deserializing data structures.</li> <li><strong><code>src/helpers/*</code></strong>: Contains utility functions.</li> <li><strong><code>src/scripts/*</code></strong>: Contains scripts for fetching and replacing signatures.</li> </ul> </li> <li> <p><strong>Set variables</strong>: Define key constants in <code>src/config/constants.ts</code>.</p> <div class="language-bash highlight"><span class="filename">src/config/constants.ts</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nb">export</span><span class="w"> </span>const<span class="w"> </span><span class="nv">RPC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://ethereum-rpc.publicnode.com&#39;</span><span class="p">;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nb">export</span><span class="w"> </span>const<span class="w"> </span><span class="nv">ETH_CORE</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="s1">&#39;0x98f3c9e6E3fAce36bAAd05FE09d375Ef1464288B&#39;</span>.toLowerCase<span class="o">()</span><span class="p">;</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="nb">export</span><span class="w"> </span>const<span class="w"> </span><span class="nv">WORMHOLESCAN_API</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;https://api.wormholescan.io/v1&#39;</span><span class="p">;</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="nb">export</span><span class="w"> </span>const<span class="w"> </span><span class="nv">LOG_MESSAGE_PUBLISHED_TOPIC</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">  </span><span class="s1">&#39;0x6eb224fb001ed210e379b335e35efe88672a8ce935d981a6896b27ffdf52a3b2&#39;</span><span class="p">;</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="nb">export</span><span class="w"> </span>const<span class="w"> </span><span class="nv">TXS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">  </span><span class="s1">&#39;0x3ad91ec530187bb2ce3b394d587878cd1e9e037a97e51fbc34af89b2e0719367&#39;</span>,
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">  </span><span class="s1">&#39;0x3c989a6bb40dcd4719453fbe7bbac420f23962c900ae75793124fc9cc614368c&#39;</span>,
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="o">]</span><span class="p">;</span>
</span></code></pre></div> <ul> <li><strong><code>RPC</code></strong>: Endpoint for interacting with an Ethereum RPC node.</li> <li><strong><code>ETH_CORE</code></strong>: <a href="/docs/products/reference/contract-addresses/#core-contracts" target="_blank">Wormhole's Core Contract address on Ethereum</a> responsible for verifying VAAs.</li> <li><strong><code>WORMHOLESCAN_API</code></strong>: Base URL for querying the Wormholescan API to fetch VAA data and Guardian sets.</li> <li><strong><code>LOG_MESSAGE_PUBLISHED_TOPIC</code></strong>: The event signature hash for <code>LogMessagePublished</code>, a Wormhole contract event that signals when a VAA has been emitted. This is used to identify relevant logs in transaction receipts.</li> <li><strong><code>TXS</code></strong>: List of example transaction hashes that will be used for testing.</li> </ul> </li> <li> <p><strong>Define data structure for working with VAAs</strong>: Specify the ABI for the Wormhole Core Contract's <code>parseAndVerifyVM</code> function, which parses and verifies VAAs. Defining the data structure, also referred to as a <a href="/docs/tools/typescript-sdk/guides/sdk-layout/" target="_blank">layout</a>, for this function ensures accurate decoding and validation of VAAs.</p> <div class="language-typescript highlight"><span class="filename">src/config/layouts.ts</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">PARSE_AND_VERIFY_VM_ABI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span><span class="nx">inputs</span><span class="o">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;encodedVM&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes&#39;</span><span class="w"> </span><span class="p">}],</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;parseAndVerifyVM&#39;</span><span class="p">,</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span><span class="nx">outputs</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">      </span><span class="nx">components</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint8&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;version&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint8&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint32&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint32&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint32&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;nonce&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint32&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint16&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;emitterChainId&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint16&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes32&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;emitterAddress&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes32&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint64&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;sequence&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint64&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint8&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;consistencyLevel&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint8&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;payload&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint32&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;guardianSetIndex&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint32&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">          </span><span class="nx">components</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes32&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes32&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes32&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes32&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint8&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;v&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint8&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint8&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;guardianIndex&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;uint8&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w">          </span><span class="p">],</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="w">          </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;struct Structs.Signature[]&#39;</span><span class="p">,</span>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="w">          </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;signatures&#39;</span><span class="p">,</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="w">          </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tuple[]&#39;</span><span class="p">,</span>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes32&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;hash&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bytes32&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="w">      </span><span class="p">],</span>
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="w">      </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;struct Structs.VM&#39;</span><span class="p">,</span>
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;vm&#39;</span><span class="p">,</span>
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="w">      </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tuple&#39;</span><span class="p">,</span>
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="w">    </span><span class="p">},</span>
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bool&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;valid&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bool&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">internalType</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;reason&#39;</span><span class="p">,</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="w"> </span><span class="p">},</span>
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="w">  </span><span class="p">],</span>
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a><span class="w">  </span><span class="nx">stateMutability</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;view&#39;</span><span class="p">,</span>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="w">  </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;function&#39;</span><span class="p">,</span>
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="p">};</span>
</span></code></pre></div> </li> </ol> <h2 id="create-vaa-handling-functions">Create VAA Handling Functions<a class="headerlink" href="#create-vaa-handling-functions" title="Permanent link"></a></h2> <p>In this section, we'll create a series of helper functions in the <code>src/helpers/vaaHelper.ts</code> file that will retrieve and verify VAAs and fetch and replace outdated Guardian signatures to generate a correctly signed VAA.</p> <p>To get started, import the necessary dependencies:</p> <div class="language-typescript highlight"><span class="filename">src/helpers/vaaHelper.ts</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">import</span><span class="w"> </span><span class="nx">axios</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">eth</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;web3&#39;</span><span class="p">;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="nx">deserialize</span><span class="p">,</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">  </span><span class="nx">serialize</span><span class="p">,</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">  </span><span class="nx">VAA</span><span class="p">,</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">  </span><span class="nx">Signature</span><span class="p">,</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@wormhole-foundation/sdk&#39;</span><span class="p">;</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">  </span><span class="nx">RPC</span><span class="p">,</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">  </span><span class="nx">ETH_CORE</span><span class="p">,</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">  </span><span class="nx">LOG_MESSAGE_PUBLISHED_TOPIC</span><span class="p">,</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">  </span><span class="nx">WORMHOLESCAN_API</span><span class="p">,</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../config/constants&#39;</span><span class="p">;</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PARSE_AND_VERIFY_VM_ABI</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../config/layouts&#39;</span><span class="p">;</span>
</span></code></pre></div> <h3 id="fetch-a-vaa-id-from-a-transaction">Fetch a VAA ID from a Transaction<a class="headerlink" href="#fetch-a-vaa-id-from-a-transaction" title="Permanent link"></a></h3> <p>To retrieve a VAA, we first need to get its VAA ID from a transaction hash. This ID allows us to fetch the full VAA later. The VAA ID is structured as follows:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>chain/emitter/sequence
</span></code></pre></div> <ul> <li><strong><code>chain</code></strong>: The <a href="/docs/products/reference/chain-ids/" target="_blank">Wormhole chain ID</a> (Ethereum is 2).</li> <li><strong><code>emitter</code></strong>: The contract address that emitted the VAA.</li> <li><strong><code>sequence</code></strong>: A unique identifier for the event.</li> </ul> <p>We must assemble the ID correctly since this is the format the Wormholescan API expects when querying VAAs.</p> <p>Follow the below steps to process the transaction logs and construct the VAA ID:</p> <ol> <li> <p><strong>Get the transaction receipt</strong>: Iterate over the array of transaction hashes and fetch the receipt to access its logs.</p> </li> <li> <p><strong>Find the Wormhole event</strong>: Iterate over the transaction logs and check for events emitted by the Wormhole Core contract. Look specifically for <code>LogMessagePublished</code> events, which indicate a VAA was created.</p> </li> <li> <p><strong>Extract the emitter and sequence number</strong>: If a matching event is found, extract the emitter address from <code>log.topics[1]</code> and remove the <code>0x</code> prefix. Then, the sequence number from <code>log.data</code> is extracted, converting it from hex to an integer.</p> </li> <li> <p><strong>Construct the VAA ID</strong>: Format the extracted data in <code>chain/emitter/sequence</code> format.</p> </li> </ol> <div class="language-typescript highlight"><span class="filename">src/helpers/vaaHelper.ts</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchVaaId</span><span class="p">(</span><span class="nx">txHashes</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaIds</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">txHashes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">RPC</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">          </span><span class="nx">jsonrpc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;2.0&#39;</span><span class="p">,</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">          </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;eth_getTransactionReceipt&#39;</span><span class="p">,</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">          </span><span class="nx">params</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">tx</span><span class="p">],</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">        </span><span class="p">})</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">      </span><span class="p">).</span><span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">result</span><span class="p">)</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Unable to fetch transaction receipt for </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">log</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">logs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">          </span><span class="nx">log</span><span class="p">.</span><span class="nx">address</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">ETH_CORE</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">          </span><span class="nx">log</span><span class="p">.</span><span class="nx">topics</span><span class="o">?</span><span class="p">.[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">LOG_MESSAGE_PUBLISHED_TOPIC</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">emitter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">log</span><span class="p">.</span><span class="nx">topics</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">substring</span><span class="p">(</span><span class="mf">2</span><span class="p">);</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">seq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">BigInt</span><span class="p">(</span><span class="nx">log</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">66</span><span class="p">)).</span><span class="nx">toString</span><span class="p">();</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">          </span><span class="nx">vaaIds</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`2/</span><span class="si">${</span><span class="nx">emitter</span><span class="si">}</span><span class="sb">/</span><span class="si">${</span><span class="nx">seq</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-29"><a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`Error processing </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">:`</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-10-30"><a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-10-31"><a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-10-32"><a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a>
</span><span id="__span-10-33"><a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">vaaIds</span><span class="p">;</span>
</span><span id="__span-10-34"><a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a><span class="p">}</span>
</span></code></pre></div> <details class="- code"> <summary>Try it out: VAA ID retrieval</summary> <p>If you want to try out the function before moving forward, create a test file inside the <code>test</code> directory: </p> <ol> <li> <p>Create the directory and file:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nb">test</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>touch<span class="w"> </span>test/fetchVaaId.run.ts
</span></code></pre></div> </li> <li> <p>Add the function call: </p> <div class="language-typescript highlight"><span class="filename">test/fetchVaaId.run.ts</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fetchVaaId</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../src/helpers/vaaHelper&#39;</span><span class="p">;</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">TXS</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../src/config/constants&#39;</span><span class="p">;</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">testFetchVaaId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">TXS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchVaaId</span><span class="p">([</span><span class="nx">tx</span><span class="p">]);</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vaaIds</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Transaction: </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">      </span><span class="nx">vaaIds</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">vaaId</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`VAA ID: </span><span class="si">${</span><span class="nx">vaaId</span><span class="si">}</span><span class="sb">`</span><span class="p">));</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`No VAA ID found for transaction: </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="p">};</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="nx">testFetchVaaId</span><span class="p">();</span>
</span></code></pre></div> </li> <li> <p>Run the script: </p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>npx<span class="w"> </span>tsx<span class="w"> </span>test/fetchVaaId.run.ts
</span></code></pre></div> <p>If successful, the output will be:</p> <p><div id="termynal" data-termynal> <span data-ty="input"><span class="file-path"></span>npx tsx test/fetchVaaId.run.ts</span> <span data-ty> </span> <span data-ty>Transaction: 0x3ad91ec530187bb2ce3b394d587878cd1e9e037a97e51fbc34af89b2e0719367</span> <span data-ty>VAA ID: 2/0000000000000000000000003ee18b2214aff97000d974cf647e7c347e8fa585/164170</span> <span data-ty="input"><span class="file-path"></span></span> </div></p> <p>If no VAA ID is found, the script will log an error message.</p> </li> </ol> </details> <h3 id="fetch-the-full-vaa">Fetch the Full VAA<a class="headerlink" href="#fetch-the-full-vaa" title="Permanent link"></a></h3> <p>Now that you have the VAA ID, we can use it to fetch the full VAA payload from the Wormholescan API. This payload contains the VAA bytes, which will later be used for signature validation.</p> <p>Open <code>src/helpers/vaaHelper.ts</code> and create the <code>fetchVaa()</code> function to iterate through VAA IDs and extract the <code>vaaBytes</code> payload.</p> <div class="language-typescript highlight"><span class="filename">src/helpers/vaaHelper.ts</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchVaa</span><span class="p">(</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="nx">vaaIds</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[]</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">vaaBytes</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">}[]</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">vaaBytes</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">}[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">vaaIds</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">WORMHOLESCAN_API</span><span class="si">}</span><span class="sb">/signed_vaa/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">vaaBytes</span><span class="p">;</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">      </span><span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">vaaBytes</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`Error fetching VAA for </span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">:`</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">results</span><span class="p">;</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="p">}</span>
</span></code></pre></div> <details class="- code"> <summary>Try it out: VAA retrieval</summary> <p>If you want to try the function before moving forward, create a script inside the <code>test</code> directory </p> <ol> <li> <p>Create the script file:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>touch<span class="w"> </span>test/fetchVaa.run.ts
</span></code></pre></div> </li> <li> <p>Add the function call:</p> <div class="language-typescript highlight"><span class="filename">test/fetchVaa.run.ts</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fetchVaaId</span><span class="p">,</span><span class="w"> </span><span class="nx">fetchVaa</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../src/helpers/vaaHelper&#39;</span><span class="p">;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">TXS</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../src/config/constants&#39;</span><span class="p">;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">testFetchVaa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">TXS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchVaaId</span><span class="p">([</span><span class="nx">tx</span><span class="p">]);</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vaaIds</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`No VAA ID found for transaction: </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">      </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaId</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">vaaIds</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchVaa</span><span class="p">([</span><span class="nx">vaaId</span><span class="p">]);</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="w">        </span><span class="sb">`Transaction: </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">\nVAA ID: </span><span class="si">${</span><span class="nx">vaaId</span><span class="si">}</span><span class="sb">\nVAA Bytes: </span><span class="si">${</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="w">          </span><span class="nx">vaaBytes</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">vaaBytes</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">vaaBytes</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Not found&#39;</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="w">        </span><span class="si">}</span><span class="sb">`</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="w">      </span><span class="p">);</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="p">};</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a><span class="nx">testFetchVaa</span><span class="p">();</span>
</span></code></pre></div> </li> <li> <p>Run the script:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>npx<span class="w"> </span>tsx<span class="w"> </span>test/fetchVaa.run.ts
</span></code></pre></div> <p>If successful, the output will be:</p> <p><div id="termynal" data-termynal> <span data-ty="input"><span class="file-path"></span>npx tsx test/fetchVaa.run.ts</span> <span data-ty> </span> <span data-ty>Transaction: 0x3ad91ec530187bb2ce3b394d587878cd1e9e037a97e51fbc34af89b2e0719367</span> <span data-ty>VAA Bytes: AQAAAAMNANQSwD/HRPcKp7Yxypl1ON8dZeMBzgYJrd2KYz6l9Tq9K9fj72fYJgkMeMaB9h...</span> <span data-ty="input"><span class="file-path"></span></span> </div></p> <p>If no VAA is found, the script will log an error message.</p> </li> </ol> </details> <h3 id="validate-vaa-signatures">Validate VAA Signatures<a class="headerlink" href="#validate-vaa-signatures" title="Permanent link"></a></h3> <p>Now, we need to verify its validity. A VAA is only considered valid if it contains signatures from currently active Guardians and is correctly verified by the Wormhole Core contract.</p> <p>Open <code>src/helpers/vaaHelper.ts</code> and add the <code>checkVaaValidity()</code> function. This function verifies whether a VAA is valid by submitting it to an Ethereum RPC node and checking for outdated signatures. </p> <p>Follow these steps to implement the function: </p> <ol> <li> <p><strong>Prepare the VAA for verification</strong>: Construct the VAA payload in a format that can be sent to the Wormhole Core contract.</p> </li> <li> <p><strong>Send an <code>eth_call</code> request</strong>: Submit the VAA to an Ethereum RPC node, calling the <code>parseAndVerifyVM</code> function on the Wormhole Core contract.</p> </li> <li> <p><strong>Decode the response</strong>: Check whether the VAA is valid. If it contains outdated signatures, further action will be required to replace them.</p> </li> </ol> <div class="language-typescript highlight"><span class="filename">src/helpers/vaaHelper.ts</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">checkVaaValidity</span><span class="p">(</span><span class="nx">vaaBytes</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">vaaBytes</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;base64&#39;</span><span class="p">);</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">    </span><span class="nx">vaa</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span><span class="w"> </span><span class="c1">// Set guardian set index to 4</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">RPC</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">        </span><span class="nx">jsonrpc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;2.0&#39;</span><span class="p">,</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">        </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;eth_call&#39;</span><span class="p">,</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">        </span><span class="nx">params</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">          </span><span class="p">{</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">            </span><span class="nx">from</span><span class="o">:</span><span class="w"> </span><span class="kt">null</span><span class="p">,</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">            </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="kt">ETH_CORE</span><span class="p">,</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">            </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">eth.abi.encodeFunctionCall</span><span class="p">(</span><span class="nx">PARSE_AND_VERIFY_VM_ABI</span><span class="p">,</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="w">              </span><span class="sb">`0x</span><span class="si">${</span><span class="nx">vaa</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="w">            </span><span class="p">]),</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="w">          </span><span class="p">},</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="w">          </span><span class="s1">&#39;latest&#39;</span><span class="p">,</span>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="w">        </span><span class="p">],</span>
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="w">      </span><span class="p">})</span>
</span><span id="__span-18-22"><a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="w">    </span><span class="p">).</span><span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
</span><span id="__span-18-23"><a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>
</span><span id="__span-18-24"><a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">decoded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">eth</span><span class="p">.</span><span class="nx">abi</span><span class="p">.</span><span class="nx">decodeParameters</span><span class="p">(</span>
</span><span id="__span-18-25"><a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a><span class="w">      </span><span class="nx">PARSE_AND_VERIFY_VM_ABI</span><span class="p">.</span><span class="nx">outputs</span><span class="p">,</span>
</span><span id="__span-18-26"><a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a><span class="w">      </span><span class="nx">result</span>
</span><span id="__span-18-27"><a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-18-28"><a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span><span id="__span-18-29"><a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a><span class="w">      </span><span class="sb">`</span><span class="si">${</span><span class="nx">decoded</span><span class="p">.</span><span class="nx">valid</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="sb"> VAA Valid: </span><span class="si">${</span><span class="nx">decoded</span><span class="p">.</span><span class="nx">valid</span><span class="si">}${</span>
</span><span id="__span-18-30"><a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a><span class="w">        </span><span class="nx">decoded</span><span class="p">.</span><span class="nx">valid</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="sb">`, Reason: </span><span class="si">${</span><span class="nx">decoded</span><span class="p">.</span><span class="nx">reason</span><span class="si">}</span><span class="sb">`</span>
</span><span id="__span-18-31"><a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a><span class="w">      </span><span class="si">}</span><span class="sb">`</span>
</span><span id="__span-18-32"><a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-18-33"><a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>
</span><span id="__span-18-34"><a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">valid</span><span class="o">:</span><span class="w"> </span><span class="kt">decoded.valid</span><span class="p">,</span><span class="w"> </span><span class="nx">reason</span><span class="o">:</span><span class="w"> </span><span class="kt">decoded.reason</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-18-35"><a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-36"><a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`Error checking VAA validity:`</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-18-37"><a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">valid</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span><span class="w"> </span><span class="nx">reason</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;RPC error&#39;</span><span class="w"> </span><span class="p">};</span>
</span><span id="__span-18-38"><a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-18-39"><a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a><span class="p">}</span>
</span></code></pre></div> <details class="- code"> <summary>Try it out: VAA Validity</summary> <p>If you want to try the function before moving forward, create a script inside the <code>test</code> directory</p> <ol> <li> <p>Create the script file:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>touch<span class="w"> </span>test/checkVaaValidity.run.ts
</span></code></pre></div> </li> <li> <p>Add the function call:</p> <div class="language-typescript highlight"><span class="filename">test/checkVaaValidity.run.ts</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">  </span><span class="nx">fetchVaaId</span><span class="p">,</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">  </span><span class="nx">fetchVaa</span><span class="p">,</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">  </span><span class="nx">checkVaaValidity</span><span class="p">,</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../src/helpers/vaaHelper&#39;</span><span class="p">;</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">TXS</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../src/config/constants&#39;</span><span class="p">;</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="kd">const</span><span class="w"> </span><span class="nx">testCheckVaaValidity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">TXS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchVaaId</span><span class="p">([</span><span class="nx">tx</span><span class="p">]);</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vaaIds</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`No VAA ID found for transaction: </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="w">      </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaId</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">vaaIds</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchVaa</span><span class="p">([</span><span class="nx">vaaId</span><span class="p">]);</span>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vaaData</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">vaaData</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">vaaBytes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`VAA not found for ID: </span><span class="si">${</span><span class="nx">vaaId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="w">        </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">checkVaaValidity</span><span class="p">(</span><span class="nx">vaaData</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">vaaBytes</span><span class="p">);</span>
</span><span id="__span-20-26"><a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span><span id="__span-20-27"><a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a><span class="w">        </span><span class="sb">`Transaction: </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">\nVAA ID: </span><span class="si">${</span><span class="nx">vaaId</span><span class="si">}</span><span class="sb">\nVAA Validity:`</span><span class="p">,</span>
</span><span id="__span-20-28"><a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a><span class="w">        </span><span class="nx">result</span>
</span><span id="__span-20-29"><a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a><span class="w">      </span><span class="p">);</span>
</span><span id="__span-20-30"><a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-20-31"><a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-20-32"><a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a><span class="p">};</span>
</span><span id="__span-20-33"><a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a>
</span><span id="__span-20-34"><a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a><span class="nx">testCheckVaaValidity</span><span class="p">();</span>
</span></code></pre></div> </li> <li> <p>Run the script:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>npx<span class="w"> </span>tsx<span class="w"> </span>test/checkVaaValidity.run.ts
</span></code></pre></div> <p>If the VAA is valid, the output will be: </p> <p><div id="termynal" data-termynal> <span data-ty="input"><span class="file-path"></span>npx tsx test/checkVaaValidity.run.ts</span> <span data-ty> </span> <span data-ty> VAA Valid: true</span> <span data-ty="input"><span class="file-path"></span></span> </div></p> <p>If invalid, the output will include the reason:</p> <p><div id="termynal" data-termynal> <span data-ty="input"><span class="file-path"></span>npx tsx test/checkVaaValidity.run.ts</span> <span data-ty> </span> <span data-ty> VAA Valid: false, Reason: VM signature invalid</span> <span data-ty>Transaction: 0x3ad91ec530187bb2ce3b394d587878cd1e9e037a97e51fbc34af89b2e0719367</span> <span data-ty="input"><span class="file-path"></span></span> </div></p> </li> </ol> </details> <h3 id="fetch-observations-vaa-signatures">Fetch Observations (VAA Signatures)<a class="headerlink" href="#fetch-observations-vaa-signatures" title="Permanent link"></a></h3> <p>Before replacing outdated signatures, we need to fetch the original VAA signatures from Wormholescan. This allows us to compare them with the latest Guardian set and determine which ones need updating.</p> <p>Inside <code>src/helpers/vaaHelper.ts</code>, create the <code>fetchObservations()</code> function to query the Wormholescan API for observations related to a given VAA. Format the response by converting Guardian addresses to lowercase for consistency, and return an empty array if an error occurs.</p> <div class="language-typescript highlight"><span class="filename">src/helpers/vaaHelper.ts</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchObservations</span><span class="p">(</span><span class="nx">vaaId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Fetching observations`</span><span class="p">);</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">      </span><span class="sb">`https://api.wormholescan.io/api/v1/observations/</span><span class="si">${</span><span class="nx">vaaId</span><span class="si">}</span><span class="sb">`</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">obs</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">      </span><span class="nx">guardianAddr</span><span class="o">:</span><span class="w"> </span><span class="kt">obs.guardianAddr.toLowerCase</span><span class="p">(),</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">      </span><span class="nx">signature</span><span class="o">:</span><span class="w"> </span><span class="kt">obs.signature</span><span class="p">,</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">    </span><span class="p">}));</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`Error fetching observations:`</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="p">}</span>
</span></code></pre></div> <details class="- code"> <summary>Try it out: Fetch Observations</summary> <p>If you want to try the function before moving forward, create a script inside the <code>test</code> directory</p> <ol> <li> <p>Create the script file:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>touch<span class="w"> </span>test/fetchObservations.run.ts
</span></code></pre></div> </li> <li> <p>Add the function call:</p> <div class="language-typescript highlight"><span class="filename">test/fetchObservations.run.ts</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fetchVaaId</span><span class="p">,</span><span class="w"> </span><span class="nx">fetchObservations</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../src/helpers/vaaHelper&#39;</span><span class="p">;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">TXS</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../src/config/constants&#39;</span><span class="p">;</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">testFetchObservations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">TXS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchVaaId</span><span class="p">([</span><span class="nx">tx</span><span class="p">]);</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">vaaIds</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`No VAA ID found for transaction: </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">      </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaId</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">vaaIds</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">observations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchObservations</span><span class="p">(</span><span class="nx">vaaId</span><span class="p">);</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">observations</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`No observations found for VAA ID: </span><span class="si">${</span><span class="nx">vaaId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="w">        </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="w">        </span><span class="sb">`Transaction: </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">\nVAA ID: </span><span class="si">${</span><span class="nx">vaaId</span><span class="si">}</span><span class="sb">\nObservations:`</span><span class="p">,</span>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="w">        </span><span class="nx">observations</span>
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="w">      </span><span class="p">);</span>
</span><span id="__span-24-25"><a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-24-26"><a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-24-27"><a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a><span class="p">};</span>
</span><span id="__span-24-28"><a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a>
</span><span id="__span-24-29"><a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a><span class="nx">testFetchObservations</span><span class="p">();</span>
</span></code></pre></div> </li> <li> <p>Run the script:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>npx<span class="w"> </span>tsx<span class="w"> </span>test/fetchObservations.run.ts
</span></code></pre></div> <p>If successful, the output will be:</p> <p><div id="termynal" data-termynal> <span data-ty="input"><span class="file-path"></span>npx tsx test/fetchObservations.run.ts</span> <span data-ty> </span> <span data-ty>Fetching observations</span> <span data-ty>Transaction: 0x3ad91ec530187bb2ce3b394d587878cd1e9e037a97e51fbc34af89b2e0719367</span> <span data-ty>Observations: [ { guardianAddr: '0xda798f6896a3331f64b48c12d1d57fd9cbe70811', signature: 'ZGFlMDYyOGNjZjFjMmE0ZTk5YzE2OThhZjAzMDM4NzZlYTM1OWMxMzczNDA3YzdlMDMxZTkyNzk0ODkwYjRiYjRiOWFmNzM3NjRiMzIyOTE0ZTQwYzNlMjllMWEzNmM2NTc3ZDc5ZTdhNTM2MzA5YjA4YjExZjE3YzE3MDViNWIwMQ==' }, { guardianAddr: '0x74a3bf913953d695260d88bc1aa25a4eee363ef0', signature: 'MzAyOTU4OGU4MWU0ODc0OTAwNDU3N2EzMGZlM2UxMDJjOWYwMjM0NWVhY2VmZWQ0ZGJlNTFkNmI3YzRhZmQ5ZTNiODFjNTg3MDNmYzUzNmJiYWFiZjNlODc1YTY3OTQwMGE4MmE3ZjZhNGYzOGY3YmRmNDNhM2VhNGQyNWNlNGMwMA==' },</span> <span data-ty>...]</span> <span data-ty="input"><span class="file-path"></span></span> </div></p> <p>If no observations are found, the script will log an error message.</p> </li> </ol> </details> <h3 id="fetch-the-latest-guardian-set">Fetch the Latest Guardian Set<a class="headerlink" href="#fetch-the-latest-guardian-set" title="Permanent link"></a></h3> <p>Now that we have the original VAA signatures, we must fetch the latest Guardian set from Wormholescan. This will allow us to compare the stored signatures with the current Guardians and determine which signatures need replacing.</p> <p>Create the <code>fetchGuardianSet()</code> function inside <code>src/helpers/vaaHelper.ts</code> to fetch the latest Guardian set.</p> <div class="language-typescript highlight"><span class="filename">src/helpers/vaaHelper.ts</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchGuardianSet</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Fetching current guardian set&#39;</span><span class="p">);</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">WORMHOLESCAN_API</span><span class="si">}</span><span class="sb">/guardianset/current`</span><span class="p">);</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">guardians</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">guardianSet</span><span class="p">.</span><span class="nx">addresses</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">addr</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">      </span><span class="nx">addr</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">guardianSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">guardianSet</span><span class="p">.</span><span class="nx">index</span><span class="p">;</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="nx">guardians</span><span class="p">,</span><span class="w"> </span><span class="nx">guardianSet</span><span class="p">];</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Error fetching guardian set:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[];</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="p">}</span>
</span></code></pre></div> <details class="- code"> <summary>Try it out: Fetch Guardian Set</summary> <p>If you want to try the function before moving forward, create a script inside the <code>test</code> directory</p> <ol> <li> <p>Create the script file:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>touch<span class="w"> </span>test/fetchGuardianSet.run.ts
</span></code></pre></div> </li> <li> <p>Add the function call:</p> <div class="language-typescript highlight"><span class="filename">test/fetchGuardianSet.run.ts</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fetchGuardianSet</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../src/helpers/vaaHelper&#39;</span><span class="p">;</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">testFetchGuardianSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">guardians</span><span class="p">,</span><span class="w"> </span><span class="nx">guardianSetIndex</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchGuardianSet</span><span class="p">();</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Current Guardian Set Index:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">guardianSetIndex</span><span class="p">);</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Guardian Addresses:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">guardians</span><span class="p">);</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="p">};</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="nx">testFetchGuardianSet</span><span class="p">();</span>
</span></code></pre></div> </li> <li> <p>Run the script:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>npx<span class="w"> </span>tsx<span class="w"> </span>test/fetchGuardianSet.run.ts
</span></code></pre></div> <p>If successful, the output will be:</p> <p><div id="termynal" data-termynal> <span data-ty="input"><span class="file-path"></span>npx tsx test/fetchGuardianSet.run.ts</span> <span data-ty> </span> <span data-ty>Fetching current guardian set</span> <span data-ty>Current Guardian Set Index: 4</span> <span data-ty>Guardian Addresses: [ '0x5893b5a76c3f739645648885bdccc06cd70a3cd3', '0xff6cb952589bde862c25ef4392132fb9d4a42157', '0x114de8460193bdf3a2fcf81f86a09765f4762fd1', '0x107a0086b32d7a0977926a205131d8731d39cbeb', </span> <span data-ty>...]</span> <span data-ty="input"><span class="file-path"></span></span> </div></p> <p>If an error occurs while fetching the Guardian set, a <code>500</code> status error will be logged.</p> </li> </ol> </details> <h3 id="replace-outdated-signatures">Replace Outdated Signatures<a class="headerlink" href="#replace-outdated-signatures" title="Permanent link"></a></h3> <p>With the full VAA, Guardian signatures, and the latest Guardian set, we can now update outdated signatures while maintaining the required signature count.</p> <ol> <li> <p><strong>Create the <code>replaceSignatures()</code> function</strong>: Open <code>src/helpers/vaaHelper.ts</code> and add the function header. To catch and handle errors properly, all logic will be wrapped inside a <code>try</code> block.</p> <div class="language-typescript highlight"><span class="filename">src/helpers/vaaHelper.ts</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">replaceSignatures</span><span class="p">(</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">  </span><span class="nx">vaa</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">Uint8Array</span><span class="o">&lt;</span><span class="nx">ArrayBufferLike</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">  </span><span class="nx">observations</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">guardianAddr</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">signature</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">}[],</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">  </span><span class="nx">currentGuardians</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[],</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">  </span><span class="nx">guardianSetIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Replacing Signatures...&#39;</span><span class="p">);</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="w">    </span><span class="c1">// Add logic in the following steps here</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Unexpected error in replaceSignatures:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="p">}</span>
</span></code></pre></div> <ul> <li><strong><code>vaa</code></strong>: Original VAA bytes.</li> <li><strong><code>observations</code></strong>: Observed signatures from the network.</li> <li><strong><code>currentGuardians</code></strong>: Latest Guardian set.</li> <li><strong><code>guardianSetIndex</code></strong>: Current Guardian set index.</li> </ul> </li> <li> <p><strong>Validate input data</strong>: Ensure all required parameters are present before proceeding. If any required input is missing, the function throws an error to prevent execution with incomplete data. The Guardian set should never be empty; if it is, this likely indicates an error in fetching the Guardian set in a previous step.</p> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">vaa</span><span class="p">)</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;VAA is undefined or empty.&#39;</span><span class="p">);</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">currentGuardians</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Guardian set is empty.&#39;</span><span class="p">);</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">observations</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;No observations provided.&#39;</span><span class="p">);</span>
</span></code></pre></div> </li> <li> <p><strong>Filter valid signatures</strong>: Remove signatures from inactive Guardians, keeping only valid ones. If there aren't enough valid signatures to replace the outdated ones, execution is halted to prevent an incomplete or invalid VAA.</p> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">validSigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">observations</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="w">      </span><span class="nx">currentGuardians</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianAddr</span><span class="p">)</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">validSigs</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;No valid signatures found. Cannot proceed.&#39;</span><span class="p">);</span>
</span></code></pre></div> </li> <li> <p><strong>Convert valid signatures</strong>: Ensure signatures are correctly formatted for verification. Convert hex-encoded signatures if necessary and extract their components.</p> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">formattedSigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">validSigs</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">      </span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">sigBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">sig</span><span class="p">.</span><span class="nx">signature</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;base64&#39;</span><span class="p">);</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">          </span><span class="c1">// If it&#39;s 130 bytes, it&#39;s hex-encoded and needs conversion</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">sigBuffer1</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="w">            </span><span class="nx">sigBuffer</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">130</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="w">              </span><span class="o">?</span><span class="w"> </span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">sigBuffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span><span class="w"> </span><span class="s1">&#39;hex&#39;</span><span class="p">)</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="w">              </span><span class="o">:</span><span class="w"> </span><span class="nx">sigBuffer</span><span class="p">;</span>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">BigInt</span><span class="p">(</span><span class="s1">&#39;0x&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">sigBuffer1</span><span class="p">.</span><span class="nx">subarray</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">32</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">));</span>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">BigInt</span><span class="p">(</span><span class="s1">&#39;0x&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">sigBuffer1</span><span class="p">.</span><span class="nx">subarray</span><span class="p">(</span><span class="mf">32</span><span class="p">,</span><span class="w"> </span><span class="mf">64</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">));</span>
</span><span id="__span-33-13"><a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">vRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sigBuffer1</span><span class="p">[</span><span class="mf">64</span><span class="p">];</span>
</span><span id="__span-33-14"><a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">vRaw</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">27</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">vRaw</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">vRaw</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">27</span><span class="p">;</span>
</span><span id="__span-33-15"><a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>
</span><span id="__span-33-16"><a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-17"><a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a><span class="w">            </span><span class="nx">guardianIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">currentGuardians.indexOf</span><span class="p">(</span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianAddr</span><span class="p">),</span>
</span><span id="__span-33-18"><a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a><span class="w">            </span><span class="nx">signature</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nx">Signature</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">s</span><span class="p">,</span><span class="w"> </span><span class="nx">v</span><span class="p">),</span>
</span><span id="__span-33-19"><a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a><span class="w">          </span><span class="p">};</span>
</span><span id="__span-33-20"><a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-33-21"><a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a><span class="w">          </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span>
</span><span id="__span-33-22"><a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a><span class="w">            </span><span class="sb">`Failed to process signature for guardian: </span><span class="si">${</span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianAddr</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span><span id="__span-33-23"><a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a><span class="w">            </span><span class="nx">error</span>
</span><span id="__span-33-24"><a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a><span class="w">          </span><span class="p">);</span>
</span><span id="__span-33-25"><a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-33-26"><a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-33-27"><a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a><span class="w">      </span><span class="p">})</span>
</span><span id="__span-33-28"><a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a><span class="w">      </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
</span><span id="__span-33-29"><a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a><span class="w">        </span><span class="p">(</span><span class="nx">sig</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">sig</span><span class="w"> </span><span class="nx">is</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">guardianIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span><span class="w"> </span><span class="nx">signature</span><span class="o">:</span><span class="w"> </span><span class="kt">Signature</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-33-30"><a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a><span class="w">          </span><span class="nx">sig</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-33-31"><a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a><span class="w">      </span><span class="p">);</span><span class="w"> </span><span class="c1">// Remove null values</span>
</span></code></pre></div> </li> <li> <p><strong>Deserialize the VAA</strong>: Convert the raw VAA data into a structured format for further processing.</p> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">parsedVaa</span><span class="o">:</span><span class="w"> </span><span class="kt">VAA</span><span class="o">&lt;</span><span class="s1">&#39;Uint8Array&#39;</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">      </span><span class="nx">parsedVaa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">deserialize</span><span class="p">(</span><span class="s1">&#39;Uint8Array&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">vaa</span><span class="p">);</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Error deserializing VAA: </span><span class="si">${</span><span class="nx">error</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div> </li> <li> <p><strong>Identify outdated signatures</strong>: Compare the current VAA signatures with the newly formatted ones to detect which signatures belong to outdated Guardians. Remove these outdated signatures to ensure only valid ones remain.</p> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">outdatedGuardianIndexes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parsedVaa</span><span class="p">.</span><span class="nx">signatures</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">      </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">        </span><span class="p">(</span><span class="nx">vaaSig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">          </span><span class="o">!</span><span class="nx">formattedSigs</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">            </span><span class="p">(</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">vaaSig</span><span class="p">.</span><span class="nx">guardianIndex</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">          </span><span class="p">)</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">      </span><span class="p">)</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">      </span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="p">);</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Outdated Guardian Indexes:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">outdatedGuardianIndexes</span><span class="p">);</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">updatedSignatures</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parsedVaa</span><span class="p">.</span><span class="nx">signatures</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="w">      </span><span class="p">(</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">!</span><span class="nx">outdatedGuardianIndexes</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="p">)</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="w">    </span><span class="p">);</span>
</span></code></pre></div> </li> <li> <p><strong>Replace outdated signatures</strong>: Substitute outdated signatures with valid ones while maintaining the correct number of signatures. If there arent enough valid replacements, execution stops.</p> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">validReplacements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">formattedSigs</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="w">      </span><span class="p">(</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">        </span><span class="o">!</span><span class="nx">updatedSignatures</span><span class="p">.</span><span class="nx">some</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="p">)</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="w">    </span><span class="c1">// Check if we have enough valid signatures to replace outdated ones**</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">outdatedGuardianIndexes</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">validReplacements</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="w">        </span><span class="sb">`Not enough valid replacement signatures! Need </span><span class="si">${</span><span class="nx">outdatedGuardianIndexes</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb">, but only </span><span class="si">${</span><span class="nx">validReplacements</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> available.`</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="w">      </span><span class="p">);</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a><span class="w">    </span><span class="nx">updatedSignatures</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a><span class="w">      </span><span class="p">...</span><span class="nx">updatedSignatures</span><span class="p">,</span>
</span><span id="__span-36-16"><a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a><span class="w">      </span><span class="p">...</span><span class="nx">validReplacements</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">outdatedGuardianIndexes</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span>
</span><span id="__span-36-17"><a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a><span class="w">    </span><span class="p">];</span>
</span><span id="__span-36-18"><a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a>
</span><span id="__span-36-19"><a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a><span class="w">    </span><span class="nx">updatedSignatures</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="p">);</span>
</span></code></pre></div> </li> <li> <p><strong>Serialize the updated VAA</strong>: Reconstruct the VAA with the updated signatures and convert it into a format suitable for submission.</p> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">updatedVaa</span><span class="o">:</span><span class="w"> </span><span class="kt">VAA</span><span class="o">&lt;</span><span class="s1">&#39;Uint8Array&#39;</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">      </span><span class="p">...</span><span class="nx">parsedVaa</span><span class="p">,</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">      </span><span class="nx">guardianSet</span><span class="o">:</span><span class="w"> </span><span class="kt">guardianSetIndex</span><span class="p">,</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">      </span><span class="nx">signatures</span><span class="o">:</span><span class="w"> </span><span class="kt">updatedSignatures</span><span class="p">,</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">patchedVaa</span><span class="o">:</span><span class="w"> </span><span class="kt">Uint8Array</span><span class="p">;</span>
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-9"><a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="w">      </span><span class="nx">patchedVaa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">serialize</span><span class="p">(</span><span class="nx">updatedVaa</span><span class="p">);</span>
</span><span id="__span-37-10"><a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-37-11"><a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Error serializing updated VAA: </span><span class="si">${</span><span class="nx">error</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-37-12"><a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div> </li> <li> <p><strong>Send the updated VAA for verification and handle errors</strong>: Submit the updated VAA to an Ethereum RPC node for validation, ensuring it can be proposed for Guardian approval. If an error occurs during submission or signature replacement, log the issue and prevent further execution.</p> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">patchedVaa</span><span class="w"> </span><span class="ow">instanceof</span><span class="w"> </span><span class="nb">Uint8Array</span><span class="p">))</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Patched VAA is not a Uint8Array!&#39;</span><span class="p">);</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaHex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`0x</span><span class="si">${</span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">patchedVaa</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Sending updated VAA to RPC...&#39;</span><span class="p">);</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">RPC</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="w">        </span><span class="nx">jsonrpc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;2.0&#39;</span><span class="p">,</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="w">        </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;eth_call&#39;</span><span class="p">,</span>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="w">        </span><span class="nx">params</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="w">          </span><span class="p">{</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="w">            </span><span class="nx">from</span><span class="o">:</span><span class="w"> </span><span class="kt">null</span><span class="p">,</span>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="w">            </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="kt">ETH_CORE</span><span class="p">,</span>
</span><span id="__span-38-17"><a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="w">            </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">eth.abi.encodeFunctionCall</span><span class="p">(</span><span class="nx">PARSE_AND_VERIFY_VM_ABI</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">vaaHex</span><span class="p">]),</span>
</span><span id="__span-38-18"><a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a><span class="w">          </span><span class="p">},</span>
</span><span id="__span-38-19"><a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a><span class="w">          </span><span class="s1">&#39;latest&#39;</span><span class="p">,</span>
</span><span id="__span-38-20"><a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a><span class="w">        </span><span class="p">],</span>
</span><span id="__span-38-21"><a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a><span class="w">      </span><span class="p">});</span>
</span><span id="__span-38-22"><a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a>
</span><span id="__span-38-23"><a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">verificationResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
</span><span id="__span-38-24"><a id="__codelineno-38-24" name="__codelineno-38-24" href="#__codelineno-38-24"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Updated VAA (hex):&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">vaaHex</span><span class="p">);</span>
</span><span id="__span-38-25"><a id="__codelineno-38-25" name="__codelineno-38-25" href="#__codelineno-38-25"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">verificationResult</span><span class="p">;</span>
</span><span id="__span-38-26"><a id="__codelineno-38-26" name="__codelineno-38-26" href="#__codelineno-38-26"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-27"><a id="__codelineno-38-27" name="__codelineno-38-27" href="#__codelineno-38-27"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Error sending updated VAA to RPC: </span><span class="si">${</span><span class="nx">error</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-38-28"><a id="__codelineno-38-28" name="__codelineno-38-28" href="#__codelineno-38-28"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div> </li> </ol> <details class="- code"> <summary>Complete Function</summary> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">replaceSignatures</span><span class="p">(</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="w">  </span><span class="nx">vaa</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">Uint8Array</span><span class="o">&lt;</span><span class="nx">ArrayBufferLike</span><span class="o">&gt;</span><span class="p">,</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">  </span><span class="nx">observations</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">guardianAddr</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">signature</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">}[],</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">  </span><span class="nx">currentGuardians</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[],</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">  </span><span class="nx">guardianSetIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Replacing Signatures...&#39;</span><span class="p">);</span>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-10"><a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">vaa</span><span class="p">)</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;VAA is undefined or empty.&#39;</span><span class="p">);</span>
</span><span id="__span-39-11"><a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">currentGuardians</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
</span><span id="__span-39-12"><a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Guardian set is empty.&#39;</span><span class="p">);</span>
</span><span id="__span-39-13"><a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">observations</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;No observations provided.&#39;</span><span class="p">);</span>
</span><span id="__span-39-14"><a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a>
</span><span id="__span-39-15"><a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">validSigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">observations</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-39-16"><a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a><span class="w">      </span><span class="nx">currentGuardians</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianAddr</span><span class="p">)</span>
</span><span id="__span-39-17"><a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-39-18"><a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a>
</span><span id="__span-39-19"><a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">validSigs</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
</span><span id="__span-39-20"><a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;No valid signatures found. Cannot proceed.&#39;</span><span class="p">);</span>
</span><span id="__span-39-21"><a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a>
</span><span id="__span-39-22"><a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">formattedSigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">validSigs</span>
</span><span id="__span-39-23"><a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a><span class="w">      </span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-24"><a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-25"><a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">sigBuffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">sig</span><span class="p">.</span><span class="nx">signature</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;base64&#39;</span><span class="p">);</span>
</span><span id="__span-39-26"><a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a><span class="w">          </span><span class="c1">// If it&#39;s 130 bytes, it&#39;s hex-encoded and needs conversion</span>
</span><span id="__span-39-27"><a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">sigBuffer1</span><span class="w"> </span><span class="o">=</span>
</span><span id="__span-39-28"><a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a><span class="w">            </span><span class="nx">sigBuffer</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">130</span>
</span><span id="__span-39-29"><a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a><span class="w">              </span><span class="o">?</span><span class="w"> </span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">sigBuffer</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span><span class="w"> </span><span class="s1">&#39;hex&#39;</span><span class="p">)</span>
</span><span id="__span-39-30"><a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a><span class="w">              </span><span class="o">:</span><span class="w"> </span><span class="nx">sigBuffer</span><span class="p">;</span>
</span><span id="__span-39-31"><a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a>
</span><span id="__span-39-32"><a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">BigInt</span><span class="p">(</span><span class="s1">&#39;0x&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">sigBuffer1</span><span class="p">.</span><span class="nx">subarray</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">32</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">));</span>
</span><span id="__span-39-33"><a id="__codelineno-39-33" name="__codelineno-39-33" href="#__codelineno-39-33"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">BigInt</span><span class="p">(</span><span class="s1">&#39;0x&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">sigBuffer1</span><span class="p">.</span><span class="nx">subarray</span><span class="p">(</span><span class="mf">32</span><span class="p">,</span><span class="w"> </span><span class="mf">64</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">));</span>
</span><span id="__span-39-34"><a id="__codelineno-39-34" name="__codelineno-39-34" href="#__codelineno-39-34"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">vRaw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sigBuffer1</span><span class="p">[</span><span class="mf">64</span><span class="p">];</span>
</span><span id="__span-39-35"><a id="__codelineno-39-35" name="__codelineno-39-35" href="#__codelineno-39-35"></a><span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">vRaw</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">27</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">vRaw</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">vRaw</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">27</span><span class="p">;</span>
</span><span id="__span-39-36"><a id="__codelineno-39-36" name="__codelineno-39-36" href="#__codelineno-39-36"></a>
</span><span id="__span-39-37"><a id="__codelineno-39-37" name="__codelineno-39-37" href="#__codelineno-39-37"></a><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-38"><a id="__codelineno-39-38" name="__codelineno-39-38" href="#__codelineno-39-38"></a><span class="w">            </span><span class="nx">guardianIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">currentGuardians.indexOf</span><span class="p">(</span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianAddr</span><span class="p">),</span>
</span><span id="__span-39-39"><a id="__codelineno-39-39" name="__codelineno-39-39" href="#__codelineno-39-39"></a><span class="w">            </span><span class="nx">signature</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nx">Signature</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">s</span><span class="p">,</span><span class="w"> </span><span class="nx">v</span><span class="p">),</span>
</span><span id="__span-39-40"><a id="__codelineno-39-40" name="__codelineno-39-40" href="#__codelineno-39-40"></a><span class="w">          </span><span class="p">};</span>
</span><span id="__span-39-41"><a id="__codelineno-39-41" name="__codelineno-39-41" href="#__codelineno-39-41"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-42"><a id="__codelineno-39-42" name="__codelineno-39-42" href="#__codelineno-39-42"></a><span class="w">          </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span>
</span><span id="__span-39-43"><a id="__codelineno-39-43" name="__codelineno-39-43" href="#__codelineno-39-43"></a><span class="w">            </span><span class="sb">`Failed to process signature for guardian: </span><span class="si">${</span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianAddr</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span><span id="__span-39-44"><a id="__codelineno-39-44" name="__codelineno-39-44" href="#__codelineno-39-44"></a><span class="w">            </span><span class="nx">error</span>
</span><span id="__span-39-45"><a id="__codelineno-39-45" name="__codelineno-39-45" href="#__codelineno-39-45"></a><span class="w">          </span><span class="p">);</span>
</span><span id="__span-39-46"><a id="__codelineno-39-46" name="__codelineno-39-46" href="#__codelineno-39-46"></a><span class="w">          </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-39-47"><a id="__codelineno-39-47" name="__codelineno-39-47" href="#__codelineno-39-47"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-39-48"><a id="__codelineno-39-48" name="__codelineno-39-48" href="#__codelineno-39-48"></a><span class="w">      </span><span class="p">})</span>
</span><span id="__span-39-49"><a id="__codelineno-39-49" name="__codelineno-39-49" href="#__codelineno-39-49"></a><span class="w">      </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
</span><span id="__span-39-50"><a id="__codelineno-39-50" name="__codelineno-39-50" href="#__codelineno-39-50"></a><span class="w">        </span><span class="p">(</span><span class="nx">sig</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">sig</span><span class="w"> </span><span class="nx">is</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">guardianIndex</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span><span class="w"> </span><span class="nx">signature</span><span class="o">:</span><span class="w"> </span><span class="kt">Signature</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-39-51"><a id="__codelineno-39-51" name="__codelineno-39-51" href="#__codelineno-39-51"></a><span class="w">          </span><span class="nx">sig</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">null</span>
</span><span id="__span-39-52"><a id="__codelineno-39-52" name="__codelineno-39-52" href="#__codelineno-39-52"></a><span class="w">      </span><span class="p">);</span><span class="w"> </span><span class="c1">// Remove null values</span>
</span><span id="__span-39-53"><a id="__codelineno-39-53" name="__codelineno-39-53" href="#__codelineno-39-53"></a>
</span><span id="__span-39-54"><a id="__codelineno-39-54" name="__codelineno-39-54" href="#__codelineno-39-54"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">parsedVaa</span><span class="o">:</span><span class="w"> </span><span class="kt">VAA</span><span class="o">&lt;</span><span class="s1">&#39;Uint8Array&#39;</span><span class="o">&gt;</span><span class="p">;</span>
</span><span id="__span-39-55"><a id="__codelineno-39-55" name="__codelineno-39-55" href="#__codelineno-39-55"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-56"><a id="__codelineno-39-56" name="__codelineno-39-56" href="#__codelineno-39-56"></a><span class="w">      </span><span class="nx">parsedVaa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">deserialize</span><span class="p">(</span><span class="s1">&#39;Uint8Array&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">vaa</span><span class="p">);</span>
</span><span id="__span-39-57"><a id="__codelineno-39-57" name="__codelineno-39-57" href="#__codelineno-39-57"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-58"><a id="__codelineno-39-58" name="__codelineno-39-58" href="#__codelineno-39-58"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Error deserializing VAA: </span><span class="si">${</span><span class="nx">error</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-39-59"><a id="__codelineno-39-59" name="__codelineno-39-59" href="#__codelineno-39-59"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-39-60"><a id="__codelineno-39-60" name="__codelineno-39-60" href="#__codelineno-39-60"></a>
</span><span id="__span-39-61"><a id="__codelineno-39-61" name="__codelineno-39-61" href="#__codelineno-39-61"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">outdatedGuardianIndexes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parsedVaa</span><span class="p">.</span><span class="nx">signatures</span>
</span><span id="__span-39-62"><a id="__codelineno-39-62" name="__codelineno-39-62" href="#__codelineno-39-62"></a><span class="w">      </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
</span><span id="__span-39-63"><a id="__codelineno-39-63" name="__codelineno-39-63" href="#__codelineno-39-63"></a><span class="w">        </span><span class="p">(</span><span class="nx">vaaSig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-39-64"><a id="__codelineno-39-64" name="__codelineno-39-64" href="#__codelineno-39-64"></a><span class="w">          </span><span class="o">!</span><span class="nx">formattedSigs</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span>
</span><span id="__span-39-65"><a id="__codelineno-39-65" name="__codelineno-39-65" href="#__codelineno-39-65"></a><span class="w">            </span><span class="p">(</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">vaaSig</span><span class="p">.</span><span class="nx">guardianIndex</span>
</span><span id="__span-39-66"><a id="__codelineno-39-66" name="__codelineno-39-66" href="#__codelineno-39-66"></a><span class="w">          </span><span class="p">)</span>
</span><span id="__span-39-67"><a id="__codelineno-39-67" name="__codelineno-39-67" href="#__codelineno-39-67"></a><span class="w">      </span><span class="p">)</span>
</span><span id="__span-39-68"><a id="__codelineno-39-68" name="__codelineno-39-68" href="#__codelineno-39-68"></a><span class="w">      </span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="p">);</span>
</span><span id="__span-39-69"><a id="__codelineno-39-69" name="__codelineno-39-69" href="#__codelineno-39-69"></a>
</span><span id="__span-39-70"><a id="__codelineno-39-70" name="__codelineno-39-70" href="#__codelineno-39-70"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Outdated Guardian Indexes:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">outdatedGuardianIndexes</span><span class="p">);</span>
</span><span id="__span-39-71"><a id="__codelineno-39-71" name="__codelineno-39-71" href="#__codelineno-39-71"></a>
</span><span id="__span-39-72"><a id="__codelineno-39-72" name="__codelineno-39-72" href="#__codelineno-39-72"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">updatedSignatures</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parsedVaa</span><span class="p">.</span><span class="nx">signatures</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
</span><span id="__span-39-73"><a id="__codelineno-39-73" name="__codelineno-39-73" href="#__codelineno-39-73"></a><span class="w">      </span><span class="p">(</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">!</span><span class="nx">outdatedGuardianIndexes</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="p">)</span>
</span><span id="__span-39-74"><a id="__codelineno-39-74" name="__codelineno-39-74" href="#__codelineno-39-74"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-39-75"><a id="__codelineno-39-75" name="__codelineno-39-75" href="#__codelineno-39-75"></a>
</span><span id="__span-39-76"><a id="__codelineno-39-76" name="__codelineno-39-76" href="#__codelineno-39-76"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">validReplacements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">formattedSigs</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
</span><span id="__span-39-77"><a id="__codelineno-39-77" name="__codelineno-39-77" href="#__codelineno-39-77"></a><span class="w">      </span><span class="p">(</span><span class="nx">sig</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-39-78"><a id="__codelineno-39-78" name="__codelineno-39-78" href="#__codelineno-39-78"></a><span class="w">        </span><span class="o">!</span><span class="nx">updatedSignatures</span><span class="p">.</span><span class="nx">some</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">sig</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="p">)</span>
</span><span id="__span-39-79"><a id="__codelineno-39-79" name="__codelineno-39-79" href="#__codelineno-39-79"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-39-80"><a id="__codelineno-39-80" name="__codelineno-39-80" href="#__codelineno-39-80"></a>
</span><span id="__span-39-81"><a id="__codelineno-39-81" name="__codelineno-39-81" href="#__codelineno-39-81"></a><span class="w">    </span><span class="c1">// Check if we have enough valid signatures to replace outdated ones**</span>
</span><span id="__span-39-82"><a id="__codelineno-39-82" name="__codelineno-39-82" href="#__codelineno-39-82"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">outdatedGuardianIndexes</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">validReplacements</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-83"><a id="__codelineno-39-83" name="__codelineno-39-83" href="#__codelineno-39-83"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span>
</span><span id="__span-39-84"><a id="__codelineno-39-84" name="__codelineno-39-84" href="#__codelineno-39-84"></a><span class="w">        </span><span class="sb">`Not enough valid replacement signatures! Need </span><span class="si">${</span><span class="nx">outdatedGuardianIndexes</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb">, but only </span><span class="si">${</span><span class="nx">validReplacements</span><span class="p">.</span><span class="nx">length</span><span class="si">}</span><span class="sb"> available.`</span>
</span><span id="__span-39-85"><a id="__codelineno-39-85" name="__codelineno-39-85" href="#__codelineno-39-85"></a><span class="w">      </span><span class="p">);</span>
</span><span id="__span-39-86"><a id="__codelineno-39-86" name="__codelineno-39-86" href="#__codelineno-39-86"></a><span class="w">      </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-39-87"><a id="__codelineno-39-87" name="__codelineno-39-87" href="#__codelineno-39-87"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-39-88"><a id="__codelineno-39-88" name="__codelineno-39-88" href="#__codelineno-39-88"></a>
</span><span id="__span-39-89"><a id="__codelineno-39-89" name="__codelineno-39-89" href="#__codelineno-39-89"></a><span class="w">    </span><span class="nx">updatedSignatures</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-39-90"><a id="__codelineno-39-90" name="__codelineno-39-90" href="#__codelineno-39-90"></a><span class="w">      </span><span class="p">...</span><span class="nx">updatedSignatures</span><span class="p">,</span>
</span><span id="__span-39-91"><a id="__codelineno-39-91" name="__codelineno-39-91" href="#__codelineno-39-91"></a><span class="w">      </span><span class="p">...</span><span class="nx">validReplacements</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">outdatedGuardianIndexes</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span>
</span><span id="__span-39-92"><a id="__codelineno-39-92" name="__codelineno-39-92" href="#__codelineno-39-92"></a><span class="w">    </span><span class="p">];</span>
</span><span id="__span-39-93"><a id="__codelineno-39-93" name="__codelineno-39-93" href="#__codelineno-39-93"></a>
</span><span id="__span-39-94"><a id="__codelineno-39-94" name="__codelineno-39-94" href="#__codelineno-39-94"></a><span class="w">    </span><span class="nx">updatedSignatures</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">guardianIndex</span><span class="p">);</span>
</span><span id="__span-39-95"><a id="__codelineno-39-95" name="__codelineno-39-95" href="#__codelineno-39-95"></a>
</span><span id="__span-39-96"><a id="__codelineno-39-96" name="__codelineno-39-96" href="#__codelineno-39-96"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">updatedVaa</span><span class="o">:</span><span class="w"> </span><span class="kt">VAA</span><span class="o">&lt;</span><span class="s1">&#39;Uint8Array&#39;</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-97"><a id="__codelineno-39-97" name="__codelineno-39-97" href="#__codelineno-39-97"></a><span class="w">      </span><span class="p">...</span><span class="nx">parsedVaa</span><span class="p">,</span>
</span><span id="__span-39-98"><a id="__codelineno-39-98" name="__codelineno-39-98" href="#__codelineno-39-98"></a><span class="w">      </span><span class="nx">guardianSet</span><span class="o">:</span><span class="w"> </span><span class="kt">guardianSetIndex</span><span class="p">,</span>
</span><span id="__span-39-99"><a id="__codelineno-39-99" name="__codelineno-39-99" href="#__codelineno-39-99"></a><span class="w">      </span><span class="nx">signatures</span><span class="o">:</span><span class="w"> </span><span class="kt">updatedSignatures</span><span class="p">,</span>
</span><span id="__span-39-100"><a id="__codelineno-39-100" name="__codelineno-39-100" href="#__codelineno-39-100"></a><span class="w">    </span><span class="p">};</span>
</span><span id="__span-39-101"><a id="__codelineno-39-101" name="__codelineno-39-101" href="#__codelineno-39-101"></a>
</span><span id="__span-39-102"><a id="__codelineno-39-102" name="__codelineno-39-102" href="#__codelineno-39-102"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">patchedVaa</span><span class="o">:</span><span class="w"> </span><span class="kt">Uint8Array</span><span class="p">;</span>
</span><span id="__span-39-103"><a id="__codelineno-39-103" name="__codelineno-39-103" href="#__codelineno-39-103"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-104"><a id="__codelineno-39-104" name="__codelineno-39-104" href="#__codelineno-39-104"></a><span class="w">      </span><span class="nx">patchedVaa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">serialize</span><span class="p">(</span><span class="nx">updatedVaa</span><span class="p">);</span>
</span><span id="__span-39-105"><a id="__codelineno-39-105" name="__codelineno-39-105" href="#__codelineno-39-105"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-106"><a id="__codelineno-39-106" name="__codelineno-39-106" href="#__codelineno-39-106"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Error serializing updated VAA: </span><span class="si">${</span><span class="nx">error</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-39-107"><a id="__codelineno-39-107" name="__codelineno-39-107" href="#__codelineno-39-107"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-39-108"><a id="__codelineno-39-108" name="__codelineno-39-108" href="#__codelineno-39-108"></a>
</span><span id="__span-39-109"><a id="__codelineno-39-109" name="__codelineno-39-109" href="#__codelineno-39-109"></a><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-110"><a id="__codelineno-39-110" name="__codelineno-39-110" href="#__codelineno-39-110"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">patchedVaa</span><span class="w"> </span><span class="ow">instanceof</span><span class="w"> </span><span class="nb">Uint8Array</span><span class="p">))</span>
</span><span id="__span-39-111"><a id="__codelineno-39-111" name="__codelineno-39-111" href="#__codelineno-39-111"></a><span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Patched VAA is not a Uint8Array!&#39;</span><span class="p">);</span>
</span><span id="__span-39-112"><a id="__codelineno-39-112" name="__codelineno-39-112" href="#__codelineno-39-112"></a>
</span><span id="__span-39-113"><a id="__codelineno-39-113" name="__codelineno-39-113" href="#__codelineno-39-113"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaHex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`0x</span><span class="si">${</span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">patchedVaa</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span><span id="__span-39-114"><a id="__codelineno-39-114" name="__codelineno-39-114" href="#__codelineno-39-114"></a>
</span><span id="__span-39-115"><a id="__codelineno-39-115" name="__codelineno-39-115" href="#__codelineno-39-115"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Sending updated VAA to RPC...&#39;</span><span class="p">);</span>
</span><span id="__span-39-116"><a id="__codelineno-39-116" name="__codelineno-39-116" href="#__codelineno-39-116"></a>
</span><span id="__span-39-117"><a id="__codelineno-39-117" name="__codelineno-39-117" href="#__codelineno-39-117"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">RPC</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-118"><a id="__codelineno-39-118" name="__codelineno-39-118" href="#__codelineno-39-118"></a><span class="w">        </span><span class="nx">jsonrpc</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;2.0&#39;</span><span class="p">,</span>
</span><span id="__span-39-119"><a id="__codelineno-39-119" name="__codelineno-39-119" href="#__codelineno-39-119"></a><span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span>
</span><span id="__span-39-120"><a id="__codelineno-39-120" name="__codelineno-39-120" href="#__codelineno-39-120"></a><span class="w">        </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;eth_call&#39;</span><span class="p">,</span>
</span><span id="__span-39-121"><a id="__codelineno-39-121" name="__codelineno-39-121" href="#__codelineno-39-121"></a><span class="w">        </span><span class="nx">params</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-39-122"><a id="__codelineno-39-122" name="__codelineno-39-122" href="#__codelineno-39-122"></a><span class="w">          </span><span class="p">{</span>
</span><span id="__span-39-123"><a id="__codelineno-39-123" name="__codelineno-39-123" href="#__codelineno-39-123"></a><span class="w">            </span><span class="nx">from</span><span class="o">:</span><span class="w"> </span><span class="kt">null</span><span class="p">,</span>
</span><span id="__span-39-124"><a id="__codelineno-39-124" name="__codelineno-39-124" href="#__codelineno-39-124"></a><span class="w">            </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="kt">ETH_CORE</span><span class="p">,</span>
</span><span id="__span-39-125"><a id="__codelineno-39-125" name="__codelineno-39-125" href="#__codelineno-39-125"></a><span class="w">            </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">eth.abi.encodeFunctionCall</span><span class="p">(</span><span class="nx">PARSE_AND_VERIFY_VM_ABI</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">vaaHex</span><span class="p">]),</span>
</span><span id="__span-39-126"><a id="__codelineno-39-126" name="__codelineno-39-126" href="#__codelineno-39-126"></a><span class="w">          </span><span class="p">},</span>
</span><span id="__span-39-127"><a id="__codelineno-39-127" name="__codelineno-39-127" href="#__codelineno-39-127"></a><span class="w">          </span><span class="s1">&#39;latest&#39;</span><span class="p">,</span>
</span><span id="__span-39-128"><a id="__codelineno-39-128" name="__codelineno-39-128" href="#__codelineno-39-128"></a><span class="w">        </span><span class="p">],</span>
</span><span id="__span-39-129"><a id="__codelineno-39-129" name="__codelineno-39-129" href="#__codelineno-39-129"></a><span class="w">      </span><span class="p">});</span>
</span><span id="__span-39-130"><a id="__codelineno-39-130" name="__codelineno-39-130" href="#__codelineno-39-130"></a>
</span><span id="__span-39-131"><a id="__codelineno-39-131" name="__codelineno-39-131" href="#__codelineno-39-131"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">verificationResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
</span><span id="__span-39-132"><a id="__codelineno-39-132" name="__codelineno-39-132" href="#__codelineno-39-132"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Updated VAA (hex):&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">vaaHex</span><span class="p">);</span>
</span><span id="__span-39-133"><a id="__codelineno-39-133" name="__codelineno-39-133" href="#__codelineno-39-133"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">verificationResult</span><span class="p">;</span>
</span><span id="__span-39-134"><a id="__codelineno-39-134" name="__codelineno-39-134" href="#__codelineno-39-134"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-135"><a id="__codelineno-39-135" name="__codelineno-39-135" href="#__codelineno-39-135"></a><span class="w">      </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="sb">`Error sending updated VAA to RPC: </span><span class="si">${</span><span class="nx">error</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span><span id="__span-39-136"><a id="__codelineno-39-136" name="__codelineno-39-136" href="#__codelineno-39-136"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-39-137"><a id="__codelineno-39-137" name="__codelineno-39-137" href="#__codelineno-39-137"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-138"><a id="__codelineno-39-138" name="__codelineno-39-138" href="#__codelineno-39-138"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Unexpected error in replaceSignatures:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-39-139"><a id="__codelineno-39-139" name="__codelineno-39-139" href="#__codelineno-39-139"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-39-140"><a id="__codelineno-39-140" name="__codelineno-39-140" href="#__codelineno-39-140"></a><span class="p">}</span>
</span></code></pre></div> </details> <h2 id="create-script-to-replace-outdated-vaa-signatures">Create Script to Replace Outdated VAA Signatures<a class="headerlink" href="#create-script-to-replace-outdated-vaa-signatures" title="Permanent link"></a></h2> <p>Now that we have all the necessary helper functions, we will create a script to automate replacing outdated VAA signatures. This script will retrieve a transactions VAA sequentially, check its validity, fetch the latest Guardian set, and update its signatures. By the end, it will output a correctly signed VAA that can be proposed for Guardian approval.</p> <ol> <li> <p><strong>Open the file</strong>: Inside <code>src/scripts/replaceSignatures.ts</code>, import the required helper functions needed to process the VAAs.</p> <div class="language-typescript highlight"><span class="filename">src/scripts/replaceSignatures.ts</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="w">  </span><span class="nx">fetchVaaId</span><span class="p">,</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="w">  </span><span class="nx">fetchVaa</span><span class="p">,</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="w">  </span><span class="nx">checkVaaValidity</span><span class="p">,</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="w">  </span><span class="nx">fetchObservations</span><span class="p">,</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="w">  </span><span class="nx">fetchGuardianSet</span><span class="p">,</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="w">  </span><span class="nx">replaceSignatures</span><span class="p">,</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../helpers/vaaHelper&#39;</span><span class="p">;</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">TXS</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;../config/constants&#39;</span><span class="p">;</span>
</span></code></pre></div> </li> <li> <p><strong>Define the main execution function</strong>: Add the following function inside <code>src/scripts/replaceSignatures.ts</code> to process each transaction in <code>TXS</code>, going step by step through the signature replacement process.</p> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">TXS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`\nProcessing TX: </span><span class="si">${</span><span class="nx">tx</span><span class="si">}</span><span class="sb">\n`</span><span class="p">);</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="w">      </span><span class="c1">// 1. Fetch Transaction VAA IDs:</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchVaaId</span><span class="p">([</span><span class="nx">tx</span><span class="p">]);</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">vaaIds</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="w">      </span><span class="c1">// 2. Fetch VAA Data:</span>
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchVaa</span><span class="p">(</span><span class="nx">vaaIds</span><span class="p">);</span>
</span><span id="__span-41-12"><a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">vaaData</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-41-13"><a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a>
</span><span id="__span-41-14"><a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">vaaBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">vaaData</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">vaaBytes</span><span class="p">;</span>
</span><span id="__span-41-15"><a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">vaaBytes</span><span class="p">)</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-41-16"><a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a>
</span><span id="__span-41-17"><a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a><span class="w">      </span><span class="c1">// 3. Check VAA Validity:</span>
</span><span id="__span-41-18"><a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">valid</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">checkVaaValidity</span><span class="p">(</span><span class="nx">vaaBytes</span><span class="p">);</span>
</span><span id="__span-41-19"><a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">valid</span><span class="p">)</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-41-20"><a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a>
</span><span id="__span-41-21"><a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a><span class="w">      </span><span class="c1">// 4. Fetch Observations (VAA signatures):</span>
</span><span id="__span-41-22"><a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">observations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchObservations</span><span class="p">(</span><span class="nx">vaaIds</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
</span><span id="__span-41-23"><a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a>
</span><span id="__span-41-24"><a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a><span class="w">      </span><span class="c1">// 5. Fetch Current Guardian Set:</span>
</span><span id="__span-41-25"><a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">currentGuardians</span><span class="p">,</span><span class="w"> </span><span class="nx">guardianSetIndex</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetchGuardianSet</span><span class="p">();</span>
</span><span id="__span-41-26"><a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a>
</span><span id="__span-41-27"><a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a><span class="w">      </span><span class="c1">// 6. Replace Signatures:</span>
</span><span id="__span-41-28"><a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">replaceSignatures</span><span class="p">(</span>
</span><span id="__span-41-29"><a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a><span class="w">        </span><span class="nx">Buffer</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">vaaBytes</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;base64&#39;</span><span class="p">),</span>
</span><span id="__span-41-30"><a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a><span class="w">        </span><span class="nx">observations</span><span class="p">,</span>
</span><span id="__span-41-31"><a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a><span class="w">        </span><span class="nx">currentGuardians</span><span class="p">,</span>
</span><span id="__span-41-32"><a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a><span class="w">        </span><span class="nx">guardianSetIndex</span>
</span><span id="__span-41-33"><a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a><span class="w">      </span><span class="p">);</span>
</span><span id="__span-41-34"><a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a>
</span><span id="__span-41-35"><a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span>
</span><span id="__span-41-36"><a id="__codelineno-41-36" name="__codelineno-41-36" href="#__codelineno-41-36"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-41-37"><a id="__codelineno-41-37" name="__codelineno-41-37" href="#__codelineno-41-37"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-38"><a id="__codelineno-41-38" name="__codelineno-41-38" href="#__codelineno-41-38"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39; Error in execution:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-41-39"><a id="__codelineno-41-39" name="__codelineno-41-39" href="#__codelineno-41-39"></a><span class="w">    </span><span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
</span><span id="__span-41-40"><a id="__codelineno-41-40" name="__codelineno-41-40" href="#__codelineno-41-40"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-41-41"><a id="__codelineno-41-41" name="__codelineno-41-41" href="#__codelineno-41-41"></a><span class="p">}</span>
</span></code></pre></div> </li> <li> <p><strong>Make the script executable</strong>: Ensure it runs when executed.</p> <div class="language-typescript highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="nx">main</span><span class="p">();</span>
</span></code></pre></div> <p>To run the script, use the following command:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>npx<span class="w"> </span>tsx<span class="w"> </span>src/scripts/replaceSignatures.ts
</span></code></pre></div> <p><div id="termynal" data-termynal> <span data-ty="input"><span class="file-path"></span>npx tsx src/scripts/replaceSignatures.ts</span> <span data-ty> </span> <span data-ty>Processing TX: 0x3ad91ec530187bb2ce3b394d587878cd1e9e037a97e51fbc34af89b2e0719367</span> <span data-ty> VAA Valid: false, Reason: VM signature invalid</span> <span data-ty>Fetching observations</span> <span data-ty>Fetching current guardian set</span> <span data-ty>Replacing Signatures...</span> <span data-ty>Outdated Guardian Indexes: [ 0 ]</span> <span data-ty>Sending updated VAA to RPC...</span> <span data-ty>Updated VAA (hex): 0x01000000040d010019447b72d51e33923a3d6b28496ccd3722d5f1e33e2...</span> <span data-ty="input"><span class="file-path"></span></span> </div></p> </li> </ol> <p>The script logs each step, skipping valid VAAs, replacing outdated signatures for invalid VAAs, and logging any errors. It then completes with a valid VAA ready for submission.</p> <h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link"></a></h2> <p>You can explore the complete project and find all necessary scripts and configurations in Wormhole's <a href="https://github.com/wormhole-foundation/demo-vaa-signature-replacement" target="_blank">demo GitHub repository</a>.</p> <p>The demo repository includes a bonus script to check the VAA redemption status on Ethereum and Solana, allowing you to verify whether a transaction has already been redeemed on the destination chain.</p> <h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link"></a></h2> <p>You've successfully built a script to fetch, validate, and replace outdated signatures in VAAs using Wormholescan and the Wormhole SDK.</p> <p>It's important to note that this tutorial does not update VAAs in the Wormhole network. Before redeeming the VAA, you must propose it for Guardian approval to finalize the process.</p> <p>Looking for more? Check out the <a href="https://github.com/wormhole-foundation/demo-tutorials" target="_blank">Wormhole Tutorial Demo repository</a> for additional examples.</p> <!-- Source file information --> <div class="md-source-file"> <small> <span class="source-file-label">Last update:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 29, 2026 12:17:46">January 29, 2026</span> <br> <span class="source-file-seperator">|</span> <span class="source-file-label">Created:</span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 29, 2026 12:17:46">January 29, 2026</span> </small> </div> <!-- Comment system --> <script>
    document.addEventListener('DOMContentLoaded', () => {
    const OFFSET = 115; // Offset height

    // Fix jump on page load
    if (window.location.hash) {
      scrollWithOffset(window.location.hash);
    }

    // Intercept in-page anchor clicks
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener('click', (event) => {
        const hash = anchor.getAttribute('href');
        const target = document.querySelector(hash);
        if (target) {
          event.preventDefault();
          scrollWithOffset(hash);
          history.pushState(null, '', hash);
        }
      });
    });

    function scrollWithOffset(hash) {
      const target = document.querySelector(hash);
      if (!target) return;

      // Give browser time to jump first (important for page load)
      setTimeout(() => {
        const y = target.getBoundingClientRect().top + window.scrollY - OFFSET;
        window.scrollTo({ top: y, behavior: 'smooth' });
      }, 0);
    }
  });
  </script> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="newsletter"><script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/embed/v2.js"></script> <script>hbspt.forms.create({portalId: "46857712", formId: "24dad166-ab48-4a89-84b4-8ae30aa59ada", region: "na1", css: "color: white;", cssClass: "newsletter-form", locale: "en", "translations": {
            en: {
              fieldLabels: {
                email: "Subscribe for updates",
              }
            }
          },
          onFormReady: function(form) {
            const emailInput = form.querySelector('input[name="email"]');
            if (emailInput) {
              emailInput.setAttribute("placeholder", "Enter your email");
            }
          }
          });</script> </div> <div class="llms"> <div> <span class="footer-title">AI Resources</span> <button class="md-clipboard--inline md-icon llms-copy md-button" data-path="/ai/llms-full.jsonl"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12z"/></svg> llms-full.jsonl </button> </div> </div> <div class="md-social"> <a href="https://x.com/wormhole" target="_blank" rel="noopener" title="Twitter" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg> </a> <a href="https://discord.com/invite/wormholecrypto" target="_blank" rel="noopener" title="Discord" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href="https://t.me/wormholecrypto" target="_blank" rel="noopener" title="Telegram" class="md-social__link"> <?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="19.249975" height="16.04286" fill="none" version="1.1" id="svg499" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs503"/> <path fill="#fff" d="m 17.609233,0.1413996 c 0,0 1.78,-0.694 1.632,0.993 -0.05,0.694 -0.494,3.124 -0.84,5.753 l -1.188,7.7870004 c 0,0 -0.099,1.14 -0.99,1.34 -0.89,0.198 -2.225,-0.695 -2.472,-0.894 -0.198,-0.149 -3.71,-2.38 -4.9470005,-3.472 -0.3459997,-0.297 -0.7419997,-0.892 0.05,-1.587 L 14.047233,5.1013996 c 0.594,-0.595 1.188,-1.983 -1.286,-0.297 l -6.9250002,4.712 c 0,0 -0.791,0.4960004 -2.275,0.05 l -3.21599998,-0.993 c 0,0 -1.18700001,-0.744 0.84099998,-1.488 4.947,-2.33 11.0310002,-4.711 16.4230002,-6.943 z" id="path497" style="fill:#ffffff;fill-opacity:1"/> </svg> </a> <a href="https://github.com/wormhole-foundation/wormhole" target="_blank" rel="noopener" title="GitHub" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href="https://wormhole.com/docs/" target="_blank" rel="noopener" title="Docs" class="md-social__link"> <?xml version="1.0" encoding="UTF-8" standalone="no"?> <svg width="22.000107" height="15.849628" fill="none" version="1.1" id="svg191" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g clippath="url(#a)" id="g184" style="fill:#ffffff;fill-opacity:1" transform="translate(1.0116736e-4,-3.0753712)"> <path fill="#fff" d="M 9.901,16.289 A 0.644,0.644 0 1 1 9.9,17.576 0.644,0.644 0 0 1 9.901,16.289 Z m 10.106,-3.985 a 0.64450019,0.64450019 0 1 1 10e-4,-1.289 0.64450019,0.64450019 0 0 1 -10e-4,1.289 z m 0,-2.636 a 1.994,1.994 0 0 0 -1.888,2.626 l -6.582,3.504 A 1.984,1.984 0 0 0 9.9,14.94 c -0.76,0 -1.452,0.436 -1.787,1.115 L 2.2,12.937 C 1.574,12.608 1.107,11.58 1.156,10.643 1.182,10.154 1.351,9.775 1.608,9.628 1.771,9.537 1.968,9.544 2.177,9.653 l 0.038,0.021 c 1.568,0.825 6.695,3.527 6.912,3.627 0.333,0.154 0.518,0.217 1.086,-0.053 l 10.6,-5.513 C 20.969,7.677 21.151,7.527 21.151,7.301 21.151,6.987 20.826,6.864 20.825,6.864 20.222,6.574 19.295,6.141 18.392,5.718 16.459,4.813 14.269,3.788 13.308,3.284 12.478,2.85 11.809,3.216 11.69,3.29 L 11.459,3.404 C 7.13,5.543 1.338,8.413 1.008,8.613 c -0.59,0.36 -0.955,1.076 -1.003,1.964 -0.073,1.409 0.645,2.878 1.672,3.416 l 6.254,3.225 a 1.994,1.994 0 0 0 1.97,1.707 1.996,1.996 0 0 0 1.992,-1.962 L 18.781,13.23 A 1.99,1.99 0 0 0 22,11.66 1.995,1.995 0 0 0 20.007,9.667" id="path182" style="fill:#ffffff;fill-opacity:1"/> </g> <defs id="defs189"/> </svg> </a> <a href="https://www.youtube.com/@wormholecrypto" target="_blank" rel="noopener" title="YouTube" class="md-social__link"> <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M549.7 124.1c-6.2-23.7-24.8-42.3-48.3-48.6C458.9 64 288.1 64 288.1 64S117.3 64 74.7 75.5c-23.5 6.3-42 24.9-48.3 48.6C15 167 15 256.4 15 256.4s0 89.4 11.4 132.3c6.3 23.6 24.8 41.5 48.3 47.8C117.3 448 288.1 448 288.1 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zM232.2 337.6V175.2l142.7 81.2z"/></svg> </a> </div> </div> </div> <div class="copyright-wrapper"> <div class="md-footer-copyright md-grid"> <div class="md-footer-copyright__highlight"> 2026  Wormhole Foundation. All Rights Reserved. </div> <div class="papermoon"> <span>Made with  by <a href="https://papermoon.io/" target="_blank">PaperMoon</a></span> </div> <div class="policy-links"> <a href="https://wormhole.com/pages/terms-of-use" target="_blank">Terms of use</a> <a href="https://wormhole.com/pages/data-protection-and-privacy-policy" target="_blank">Privacy policy</a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <div class="md-consent" data-md-component="consent" id="__consent" hidden> <div class="md-consent__overlay"></div> <aside class="md-consent__inner"> <form class="md-consent__form md-grid md-typeset" name="consent"> <h4>Cookie consent</h4> <p>This site uses cookies to deliver its service and to analyze traffic. By browsing this site, you accept the <a href="https://wormhole.com/pages/data-protection-and-privacy-policy" target="_blank" rel="noopener">privacy policy</a>.</p> <input class="md-toggle" type="checkbox" id="__settings" checked> <div class="md-consent__settings"> <ul class="task-list"> <li class="task-list-item"> <label class="task-list-control"> <input type="checkbox" name="analytics" checked> <span class="task-list-indicator"></span> Google Analytics </label> </li> </ul> </div> <div class="md-consent__controls"> <button class="md-button md-button--primary">Accept</button> <button type="reset" class="md-button md-button--primary">Reject</button> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "content.action.edit", "navigation.tabs", "navigation.tabs.sticky"], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script> <script src="../../../../js/copy-to-llms.a749e2.min.js"></script> <script defer>
    document.addEventListener('DOMContentLoaded', () => {
      document.body.addEventListener('click', (event) => {
        if (event.target.tagName === 'ASK-COOKBOOK') {
          event.target.addEventListener('keydown', (event) => {
            event.stopPropagation();
          });
        }
      });
    });
  </script> <script>
    document.addEventListener('DOMContentLoaded', () => {
      function setTableHeaderOffset(navbarSelector, tableSelector) {
        const navbar = document.querySelector(navbarSelector);
        const navbarHeight = navbar ? navbar.offsetHeight - 1 : 0;

        // Loop through each table
        document.querySelectorAll(tableSelector).forEach((tableWrapper) => {
          const thead = tableWrapper.querySelector('thead');
          const table = tableWrapper.querySelector('table');

          // This blocking div is used to prevent the left and right borders from
          // sticking out of the top of the table
          const blockingDiv = tableWrapper.querySelector('.header-blocker');
          thead.style.top = `${navbarHeight + 20}px`;
          if (blockingDiv) {
            // If the blocker div already exists, modify the styles          
            blockingDiv.style.top = `${navbarHeight}px`;
            return;
          } else {
            // Create the blocker div and append it below the header and modify styles           
            const blockingDiv = document.createElement('div');
            blockingDiv.classList.add('header-blocker');
            tableWrapper.appendChild(blockingDiv);
            blockingDiv.style.top = `${navbarHeight}px`;
          }
        });
      }

      // Call it on load and on resize:
      window.addEventListener('load', () => setTableHeaderOffset('.md-header', '.md-typeset__table'));
      window.addEventListener('resize', () => setTableHeaderOffset('.md-header', '.md-typeset__table'));
    });
  </script> <script>
    document.addEventListener('DOMContentLoaded', () => {
      const SITE_BASE = location.origin.replace(/\/+$/, '') + `/docs/`; // current host
      const AI_BASE = '/ai'; // relative path to AI content on same host

      const stripLeading = (value) => value.replace(/^\/+/, '');

      const toAbsolute = (rawPath) => {
        if (!rawPath) return null;
        const dataPath = rawPath.trim();
        if (/^https?:\/\//i.test(dataPath)) return dataPath; // already absolute

        const normalized = stripLeading(dataPath);

        // All AI content is served from the AI_BASE on the current host
        if (normalized.startsWith('ai/')) {
          return `${SITE_BASE}${AI_BASE}/${stripLeading(normalized.replace(/^ai\//, ''))}`;
        }

        // NOTE: same-origin assets: default for everything we ship in docs/ (llms, ai bundles, etc.)
        // llms.txt is served from the site root; other AI artifacts live under /ai
        if (normalized === 'llms.txt') return `${SITE_BASE}/${normalized}`;  
        if (dataPath.startsWith('/')) return `${SITE_BASE}/${stripLeading(dataPath)}`;

        // Fallback  site-relative
        return `${SITE_BASE}/${normalized}`;
      };

      const downloadViaFetch = async (url, filename) => {
        try {
          const res = await fetch(url, { credentials: 'omit' });
          if (!res.ok) throw new Error(`HTTP ${res.status}`);
          const blob = await res.blob(); // keep original content-type from server
          const link = document.createElement('a');
          const objectUrl = URL.createObjectURL(blob);
          link.href = objectUrl;
          link.download = filename || 'download.txt';
          document.body.appendChild(link);
          link.click();
          URL.revokeObjectURL(objectUrl);
          link.remove();
        } catch (err) {
          console.error('Download failed, falling back to navigation:', err);
          // Fallback: just navigate to the URL (will open in browser)
          window.location.href = url;
        }
      };

      const copyTextFromUrl = async (url) => {
        try {
          const res = await fetch(url, { credentials: 'omit' });
          if (!res.ok) throw new Error(`HTTP ${res.status}`);
          const text = await res.text();
          await navigator.clipboard.writeText(text);

          const dlg = document.querySelector('.md-dialog');
          if (dlg) {
            dlg.classList.add('md-dialog--active');
            const msg = dlg.querySelector('.md-dialog__inner');
            if (msg) msg.textContent = "Copied to clipboard";
            setTimeout(() => dlg.classList.remove('md-dialog--active'), 2000);
          }
        } catch (err) {
          console.error('Failed to copy:', err);
          const dlg = document.querySelector('.md-dialog');
          if (dlg) dlg.classList.remove('md-dialog--active');
        }
      };

      // COPY buttons
      document.querySelectorAll('.llms-copy').forEach((btn) => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const url = toAbsolute(btn.getAttribute('data-path'));
          if (url) copyTextFromUrl(url);
        });
      });

      // DOWNLOAD buttons: force a real download via Blob
      document.querySelectorAll('.llms-dl').forEach((a) => {
        // Set href for right-click "Copy link address" convenience
        const abs = toAbsolute(a.getAttribute('data-path'));
        if (abs) a.setAttribute('href', abs);

        a.addEventListener('click', (e) => {
          e.preventDefault();
          const path = a.getAttribute('data-path') || '';
          const url = toAbsolute(path);
          if (!url) return;
          // Prefer explicit filename; else derive from last path segment
          const filename =
            a.getAttribute('data-filename') ||
            path.split('/').pop() ||
            'download.txt';
          downloadViaFetch(url, filename);
        });
      });

      // VIEW buttons: open raw files in a new tab
      document.querySelectorAll('.llms-view').forEach((a) => {
        const abs = toAbsolute(a.getAttribute('data-path'));
        if (abs) {
          a.setAttribute('href', abs);
          a.setAttribute('target', '_blank');
          a.setAttribute('rel', 'noopener');
        }
      });
    });
  </script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>